{
  "created_at": "2026-02-17T18:10:58.816388Z",
  "epic": {
    "data": {
      "branch_name": "fn-51-add-proper-skill-frontmatter-across-all",
      "completion_review_status": "unknown",
      "completion_reviewed_at": null,
      "created_at": "2026-02-17T15:49:53.016500Z",
      "default_impl": null,
      "default_review": null,
      "default_sync": null,
      "depends_on_epics": [],
      "id": "fn-51-add-proper-skill-frontmatter-across-all",
      "next_task": 1,
      "plan_review_status": "ship",
      "plan_reviewed_at": "2026-02-17T16:01:49.322553Z",
      "spec_path": ".flow/specs/fn-51-add-proper-skill-frontmatter-across-all.md",
      "status": "open",
      "title": "Add proper skill frontmatter across all 127 skills",
      "updated_at": "2026-02-17T16:06:33.646462Z"
    },
    "spec": "# Add Proper Skill Frontmatter Across All Skills\n\n## Overview\n\nfn-49 was instructed to optimize UX and mark implicit skills appropriately, but `user-invocable: false` was never actually set on any skill. Currently all 127 skills have only `name` + `description` frontmatter (except `plugin-self-publish` which has `disable-model-invocation: true`). This epic:\n\n1. **Removes `plugin-self-publish`** from the plugin (it's repo-level publishing instructions, not a .NET skill) and moves its content to repo-level instructions\n2. **Adds `user-invocable: false`** on 117 implicit/reference skills (hides from `/` menu)\n3. **Adds `context: fork` + `model: haiku`** on 4 detection/analysis skills (isolated execution, cheaper model)\n4. **Adds dynamic context (`!` syntax)** on detection skills that benefit from runtime project data\n5. **Updates validation + documentation** to accept and describe the expanded frontmatter\n\n## Scope\n\n### In scope\n- Remove `plugin-self-publish` from plugin; move content to repo-level instructions (e.g., CONTRIBUTING.md or a repo-level CLAUDE.md section)\n- Add `user-invocable: false` to 113 skills that are reference/convention content (T2 scope)\n- Add `user-invocable: false` + `context: fork` + `model: haiku` + dynamic context to 4 detection skills (T3 scope \u2014 T3 owns these files exclusively)\n- Keep 9 skills user-invocable (actionable commands users would type as `/` commands)\n- Update `_validate_skills.py` `ALLOWED_FRONTMATTER_FIELDS` to accept new fields, with type validation for boolean/string fields\n- Update `CONTRIBUTING-SKILLS.md`, plugin `CLAUDE.md`, and root `CLAUDE.md` with expanded frontmatter spec\n\n### Out of scope\n- Changing skill descriptions or content (covered by fn-49)\n- Adding `allowed-tools` restrictions (agent-level concern, defer)\n- Adding `agent` field to skills (requires agent system changes)\n- Adding `hooks` field to skills (no current need)\n\n## User-invocable classification\n\n**Keep user-invocable (default true) \u2014 9 actionable command skills:**\n- `dotnet-advisor` \u2014 Router skill, always loaded, entry point for users\n- `dotnet-scaffold-project` \u2014 Scaffolds new projects\n- `dotnet-add-ci` \u2014 Adds CI/CD pipelines\n- `dotnet-add-testing` \u2014 Adds test infrastructure\n- `dotnet-add-analyzers` \u2014 Adds static analysis\n- `dotnet-modernize` \u2014 Audits/upgrades projects\n- `dotnet-ui-chooser` \u2014 UI framework selection wizard\n- `dotnet-data-access-strategy` \u2014 Data access selection wizard (borderline \u2014 revisit post-launch based on usage)\n- `dotnet-version-upgrade` \u2014 Version migration tool (borderline \u2014 revisit post-launch based on usage)\n\n**Remove from plugin:**\n- `plugin-self-publish` \u2014 Not a .NET skill; repo-level publishing instructions. Remove from plugin, move content to repo-level docs.\n\n**Set `user-invocable: false` \u2014 117 skills total:**\n- 113 handled by T2 (all implicit skills except the 4 detection skills)\n- 4 handled by T3 (detection skills get `user-invocable: false` PLUS `context: fork` + `model: haiku`)\n\n**Math:** 127 current - 1 removed (`plugin-self-publish`) = 126 remaining. 126 - 9 user-invocable = 117 implicit. Of those 117: 113 in T2, 4 in T3. No file overlap.\n\n## Detection skills for `context: fork`\n\nThese skills run as self-contained detection/analysis producing structured output. They don't need conversation history and benefit from isolated execution with a cheaper model.\n\n**T3 owns these 4 files exclusively** (T2 does not touch them):\n\n| Skill | Registered path | `context: fork` | `model` | Dynamic context (`!`) |\n|-------|----------------|-----------------|---------|----------------------|\n| `dotnet-version-detection` | `skills/foundation/dotnet-version-detection` | yes | haiku | `! dotnet --version 2>/dev/null` |\n| `dotnet-project-analysis` | `skills/foundation/dotnet-project-analysis` | yes | haiku | `! find . -maxdepth 3 \\( -name \"*.csproj\" -o -name \"*.sln\" -o -name \"*.slnx\" \\) 2>/dev/null \\| head -20` |\n| `dotnet-solution-navigation` | `skills/agent-meta-skills/dotnet-solution-navigation` | yes | haiku | `! find . -maxdepth 2 \\( -name \"*.sln\" -o -name \"*.slnx\" \\) 2>/dev/null \\| head -5` |\n| `dotnet-build-analysis` | `skills/agent-meta-skills/dotnet-build-analysis` | yes | haiku | none |\n\n### Dynamic context syntax\n\nDynamic context uses the `!` prefix on a code fence in the skill body. The preprocessor runs the shell command and replaces the block with its output before Claude sees the content. Example target for `dotnet-version-detection`:\n\n```\n---\nname: dotnet-version-detection\ndescription: Detects installed .NET SDK and runtime versions, TFMs, and global.json constraints\nuser-invocable: false\ncontext: fork\nmodel: haiku\n---\n\n<!-- Dynamic context: injected at load time -->\n```! dotnet --version 2>/dev/null\n```\n\n# dotnet-version-detection\n...rest of skill content...\n```\n\n## Key constraints\n\n- **Validation first**: `_validate_skills.py` line 30 `ALLOWED_FRONTMATTER_FIELDS = {\"name\", \"description\"}` must be expanded BEFORE or WITH skill changes, otherwise CI fails\n- **Type validation**: T1 should add type checking for boolean fields (`user-invocable`, `disable-model-invocation`) and string fields (`context`, `model`) to catch quoted-string booleans like `user-invocable: \"false\"`\n- **Budget impact**: Removing `plugin-self-publish` (which had `disable-model-invocation: true`, so its description was NOT in context) does not change the context budget. Adding `user-invocable: false` does NOT remove descriptions from context budget \u2014 only `disable-model-invocation: true` does. This is purely UX decluttering.\n- **`context: fork` caution**: NOT appropriate for reference/convention skills \u2014 they need conversation context to be useful. Only use on self-contained detection tasks.\n- **File ownership**: T1 owns validation/docs + plugin-self-publish removal. T2 owns 113 implicit skill files. T3 owns 4 detection skill files. No overlap between T2 and T3.\n\n## Quick commands\n\n```bash\ncd plugins/dotnet-artisan\n./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh\n```\n\n## Acceptance\n\n- [ ] `plugin-self-publish` removed from plugin (SKILL.md deleted, removed from plugin.json skills array)\n- [ ] `plugin-self-publish` content moved to repo-level instructions\n- [ ] 113 implicit skills have `user-invocable: false` in frontmatter (T2)\n- [ ] 4 detection skills have `user-invocable: false` + `context: fork` + `model: haiku` (T3)\n- [ ] 9 user-invocable skills do NOT have `user-invocable: false`\n- [ ] 3 detection skills have working dynamic context `!` commands (version-detection, project-analysis, solution-navigation)\n- [ ] `_validate_skills.py` accepts all new frontmatter fields with type validation for booleans/strings\n- [ ] `validate-skills.sh && validate-marketplace.sh` pass clean (now with 126 skills)\n- [ ] `CONTRIBUTING-SKILLS.md` documents expanded frontmatter spec\n- [ ] Plugin `CLAUDE.md` updated with new frontmatter fields\n- [ ] Root `CLAUDE.md` updated with new frontmatter fields\n- [ ] Dynamic context `!` commands verified: each produces output or graceful empty output without errors in a shell\n\n## References\n\n- Official frontmatter spec: https://code.claude.com/docs/en/skills#frontmatter-reference\n- `_validate_skills.py:30` \u2014 `ALLOWED_FRONTMATTER_FIELDS`\n- `CONTRIBUTING-SKILLS.md:82-90` \u2014 Current frontmatter docs (\"No other frontmatter fields are recognized\")\n- `plugins/dotnet-artisan/CLAUDE.md:7-20` \u2014 \"Every skill requires exactly two frontmatter fields\"\n- fn-49 (completed) \u2014 Optimized descriptions but missed `user-invocable` field\n"
  },
  "epic_id": "fn-51-add-proper-skill-frontmatter-across-all",
  "schema_version": 2,
  "tasks": [
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-17T15:51:04.458806Z",
        "depends_on": [],
        "epic": "fn-51-add-proper-skill-frontmatter-across-all",
        "id": "fn-51-add-proper-skill-frontmatter-across-all.1",
        "priority": null,
        "spec_path": ".flow/tasks/fn-51-add-proper-skill-frontmatter-across-all.1.md",
        "status": "todo",
        "title": "Update validation and docs to support expanded frontmatter",
        "updated_at": "2026-02-17T16:06:58.283858Z"
      },
      "id": "fn-51-add-proper-skill-frontmatter-across-all.1",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-17T17:26:12.276762Z",
        "evidence": {
          "commits": [
            "6529802fa020b4f41accd2a477ba270ab407adb0"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-17T17:39:27.833190Z"
      },
      "spec": "## Description\n\nUpdate the validation script and all documentation to support the expanded set of SKILL.md frontmatter fields. Remove `plugin-self-publish` from the plugin and move its content to repo-level instructions. This must complete before T2 and T3 modify skills.\n\n**Size:** M\n**Files:**\n- `plugins/dotnet-artisan/scripts/_validate_skills.py` (~line 30)\n- `plugins/dotnet-artisan/CONTRIBUTING-SKILLS.md` (~lines 82-90)\n- `plugins/dotnet-artisan/CLAUDE.md` (~lines 7-20)\n- `CLAUDE.md` (root, validation section)\n- `plugins/dotnet-artisan/skills/foundation/plugin-self-publish/SKILL.md` (delete)\n- `plugins/dotnet-artisan/.claude-plugin/plugin.json` (remove plugin-self-publish entry from skills array)\n- Repo-level location for publishing instructions (e.g., section in `CONTRIBUTING.md` or root `CLAUDE.md`)\n\n## Approach\n\n- **Remove `plugin-self-publish`**: Delete the skill directory, remove from `plugin.json` skills array, move its publishing guidance to a repo-level doc (CONTRIBUTING.md \"Publishing to Marketplace\" section is the natural home)\n- Expand `ALLOWED_FRONTMATTER_FIELDS` at `_validate_skills.py:30` to include: `user-invocable`, `disable-model-invocation`, `context`, `model`\n- Add a `FIELD_TYPES` dict for type validation \u2014 boolean fields (`user-invocable`, `disable-model-invocation`) and string fields (`context`, `model`) \u2014 to catch quoted-string booleans like `user-invocable: \"false\"`\n- Update `CONTRIBUTING-SKILLS.md` frontmatter spec section (currently says \"No other frontmatter fields are recognized\") with a table of all recognized fields\n- Update plugin `CLAUDE.md` which says \"Every skill requires exactly two frontmatter fields\" to reflect expanded spec\n- Update root `CLAUDE.md` validation section to list all recognized fields\n- Update projected skill count references from 127 to 126 where applicable\n- Maintain backwards compatibility \u2014 `name` and `description` remain the only REQUIRED fields\n\n## Key context\n\n- Official frontmatter reference: https://code.claude.com/docs/en/skills#frontmatter-reference\n- Current allowed set: `{\"name\", \"description\"}` \u2014 anything else causes validation failure\n- The existing parser at `_validate_skills.py:~108` already converts `true`/`false` to Python `bool`, but there is no type checking beyond name/description being strings\n- `plugin-self-publish` is the only skill with `disable-model-invocation: true`; it's a meta-skill about publishing to this marketplace, not .NET guidance\n- `validate-skills.sh` has `--projected-skills 127` \u2014 update to 126 after removal\n- Must pass: `./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh`\n\n## Acceptance\n\n- [ ] `plugin-self-publish` skill directory deleted\n- [ ] `plugin-self-publish` removed from `plugin.json` skills array\n- [ ] Publishing guidance moved to repo-level docs (e.g., CONTRIBUTING.md)\n- [ ] `_validate_skills.py` `ALLOWED_FRONTMATTER_FIELDS` includes: `user-invocable`, `disable-model-invocation`, `context`, `model`\n- [ ] `_validate_skills.py` has `FIELD_TYPES` dict with type validation for boolean and string fields\n- [ ] Type errors (e.g., `user-invocable: \"false\"`) emit warnings\n- [ ] `CONTRIBUTING-SKILLS.md` documents each frontmatter field with description and usage guidance\n- [ ] Plugin `CLAUDE.md` no longer says \"exactly two frontmatter fields\"\n- [ ] Root `CLAUDE.md` lists recognized frontmatter fields\n- [ ] `validate-skills.sh && validate-marketplace.sh` pass clean (now 126 skills)\n\n## Done summary\nExpanded ALLOWED_FRONTMATTER_FIELDS to accept user-invocable, disable-model-invocation, context, and model with FIELD_TYPES boolean/string type validation. Removed plugin-self-publish skill, moved publishing guidance to CONTRIBUTING.md, and updated skill counts from 127 to 126 across all documentation.\n## Evidence\n- Commits: 6529802fa020b4f41accd2a477ba270ab407adb0\n- Tests: ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-17T15:51:11.086686Z",
        "depends_on": [
          "fn-51-add-proper-skill-frontmatter-across-all.1"
        ],
        "epic": "fn-51-add-proper-skill-frontmatter-across-all",
        "id": "fn-51-add-proper-skill-frontmatter-across-all.2",
        "priority": null,
        "spec_path": ".flow/tasks/fn-51-add-proper-skill-frontmatter-across-all.2.md",
        "status": "todo",
        "title": "Add user-invocable: false to ~117 implicit skills",
        "updated_at": "2026-02-17T16:07:20.792144Z"
      },
      "id": "fn-51-add-proper-skill-frontmatter-across-all.2",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-17T17:44:41.953945Z",
        "evidence": {
          "commits": [
            "64da379878d0cb54a4705b1ea5115850dca46ace"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-17T17:54:09.736160Z"
      },
      "spec": "## Description\n\nAdd `user-invocable: false` to the frontmatter of 113 implicit reference/convention/pattern skills. T3 handles the 4 detection skills separately. Keep 9 actionable command skills as user-invocable (default). `plugin-self-publish` is removed by T1.\n\n**Size:** M (113 files, repetitive single-line addition)\n**Files:** All `skills/<category>/<skill-name>/SKILL.md` except the 9 user-invocable skills AND the 4 detection skills (owned by T3).\n\n## Approach\n\n- For each of the 113 implicit skills, add `user-invocable: false` as a third frontmatter field after `description`\n- **DO NOT modify** these 9 skills (they remain user-invocable by default):\n  - `dotnet-advisor` (router, entry point)\n  - `dotnet-scaffold-project` (scaffolds new projects)\n  - `dotnet-add-ci` (adds CI pipelines)\n  - `dotnet-add-testing` (adds test infrastructure)\n  - `dotnet-add-analyzers` (adds static analysis)\n  - `dotnet-modernize` (project audit/upgrade)\n  - `dotnet-ui-chooser` (UI framework wizard)\n  - `dotnet-data-access-strategy` (data access wizard)\n  - `dotnet-version-upgrade` (version migration)\n- **DO NOT modify** these 4 detection skills (owned exclusively by T3):\n  - `skills/foundation/dotnet-version-detection`\n  - `skills/foundation/dotnet-project-analysis`\n  - `skills/agent-meta-skills/dotnet-solution-navigation`\n  - `skills/agent-meta-skills/dotnet-build-analysis`\n- `plugin-self-publish` no longer exists (removed by T1)\n- Follow existing frontmatter pattern \u2014 fields go between `---` fences, one per line\n- Do not change `name`, `description`, or any skill content\n- Use `plugin.json` skills array as the canonical list to compute exact target set\n\n## Key context\n\n- The user-invocable list above covers skills that are actionable commands (scaffold, add, audit). All other skills are reference material Claude loads implicitly.\n- `user-invocable: false` hides from `/` slash menu but Claude CAN still invoke them and descriptions remain in context budget.\n- Validation (T1) must be updated first \u2014 otherwise `_validate_skills.py` rejects the new field.\n- Classification of `dotnet-data-access-strategy` and `dotnet-version-upgrade` as user-invocable is borderline \u2014 can be revisited post-launch based on usage patterns.\n\n## Acceptance\n\n- [ ] 113 implicit skills have `user-invocable: false` in frontmatter\n- [ ] 9 user-invocable skills listed above do NOT have `user-invocable: false`\n- [ ] 4 detection skills listed above are NOT modified (T3 owns those files)\n- [ ] No skill content (below frontmatter) is modified\n- [ ] `validate-skills.sh && validate-marketplace.sh` pass clean\n\n## Done summary\nAdded `user-invocable: false` frontmatter to 113 implicit reference/convention skills, keeping 9 actionable command skills user-invocable (default) and 4 detection skills untouched (T3-owned). All validation passes clean.\n## Evidence\n- Commits: 64da379878d0cb54a4705b1ea5115850dca46ace\n- Tests: ./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-17T15:51:17.635820Z",
        "depends_on": [
          "fn-51-add-proper-skill-frontmatter-across-all.1"
        ],
        "epic": "fn-51-add-proper-skill-frontmatter-across-all",
        "id": "fn-51-add-proper-skill-frontmatter-across-all.3",
        "priority": null,
        "spec_path": ".flow/tasks/fn-51-add-proper-skill-frontmatter-across-all.3.md",
        "status": "todo",
        "title": "Add context: fork + model + dynamic context to detection skills",
        "updated_at": "2026-02-17T16:00:40.726042Z"
      },
      "id": "fn-51-add-proper-skill-frontmatter-across-all.3",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-17T18:00:03.296908Z",
        "evidence": {
          "commits": [
            "0606eb42c0b6ca4a13798a5abbf5ec6b29ed069f"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-17T18:06:44.703688Z"
      },
      "spec": "## Description\n\nAdd `user-invocable: false` + `context: fork` + `model: haiku` to 4 detection/analysis skills, plus dynamic context (`!` shell preprocessing) where runtime project data improves results. T3 owns these 4 files exclusively \u2014 T2 does not touch them.\n\n**Size:** S\n**Files:**\n- `skills/foundation/dotnet-version-detection/SKILL.md`\n- `skills/foundation/dotnet-project-analysis/SKILL.md`\n- `skills/agent-meta-skills/dotnet-solution-navigation/SKILL.md`\n- `skills/agent-meta-skills/dotnet-build-analysis/SKILL.md`\n\n## Approach\n\n- Add `user-invocable: false`, `context: fork`, and `model: haiku` to frontmatter of each detection skill\n- Add dynamic context (`!` command) preprocessing where beneficial \u2014 uses code fence with `!` prefix in the skill body, below frontmatter. The preprocessor runs the shell command and replaces the block with its output before Claude sees the content.\n\n### Concrete syntax example (target for `dotnet-version-detection`)\n\n```markdown\n---\nname: dotnet-version-detection\ndescription: Detects installed .NET SDK and runtime versions, TFMs, and global.json constraints\nuser-invocable: false\ncontext: fork\nmodel: haiku\n---\n\n```! dotnet --version 2>/dev/null\n```\n\n# dotnet-version-detection\n...rest of existing skill content unchanged...\n```\n\n### Dynamic context per skill\n\n- `dotnet-version-detection`: `! dotnet --version 2>/dev/null`\n- `dotnet-project-analysis`: `! find . -maxdepth 3 \\( -name \"*.csproj\" -o -name \"*.sln\" -o -name \"*.slnx\" \\) 2>/dev/null | head -20`\n- `dotnet-solution-navigation`: `! find . -maxdepth 2 \\( -name \"*.sln\" -o -name \"*.slnx\" \\) 2>/dev/null | head -5`\n- `dotnet-build-analysis`: no dynamic context needed (analyzes build output provided in conversation)\n\n## Key context\n\n- `model: haiku` only takes effect with `context: fork` \u2014 this is required\n- `context: fork` skills get their own context window \u2014 conversation history is NOT passed\n- These 4 skills are the only ones where fork makes sense \u2014 reference/convention skills NEED conversation context\n- Note: `dotnet-solution-navigation` and `dotnet-build-analysis` are under `skills/agent-meta-skills/`, NOT `skills/foundation/` \u2014 use registered paths from `plugin.json`\n- All `!` commands use `2>/dev/null` to gracefully handle missing tools/projects\n\n## Acceptance\n\n- [ ] 4 detection skills have `user-invocable: false` + `context: fork` + `model: haiku` in frontmatter\n- [ ] `dotnet-version-detection` has dynamic context `! dotnet --version 2>/dev/null`\n- [ ] `dotnet-project-analysis` has dynamic context for project file listing\n- [ ] `dotnet-solution-navigation` has dynamic context for solution file listing\n- [ ] `dotnet-build-analysis` has `context: fork` + `model: haiku` (no dynamic context)\n- [ ] Dynamic context verified: each `!` command manually run in shell produces output or empty output without errors\n- [ ] Existing skill content below frontmatter is unchanged (only frontmatter and dynamic context block added)\n- [ ] `validate-skills.sh && validate-marketplace.sh` pass clean\n\n## Done summary\nAdded user-invocable: false, context: fork, and model: haiku frontmatter to 4 detection/analysis skills. Added dynamic context shell preprocessing (! commands) to dotnet-version-detection, dotnet-project-analysis, and dotnet-solution-navigation; dotnet-build-analysis gets no dynamic context as it analyzes conversation input.\n## Evidence\n- Commits: 0606eb42c0b6ca4a13798a5abbf5ec6b29ed069f\n- Tests: ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh\n- PRs:"
    }
  ]
}
