{
  "created_at": "2026-02-27T05:29:22.953395Z",
  "epic": {
    "data": {
      "branch_name": "fn-65-skill-quality-fine-tuning-eliminate",
      "completion_review_status": "unknown",
      "completion_reviewed_at": null,
      "created_at": "2026-02-27T05:26:30.497978Z",
      "default_impl": null,
      "default_review": null,
      "default_sync": null,
      "depends_on_epics": [],
      "id": "fn-65-skill-quality-fine-tuning-eliminate",
      "next_task": 1,
      "plan_review_status": "unknown",
      "plan_reviewed_at": null,
      "spec_path": ".flow/specs/fn-65-skill-quality-fine-tuning-eliminate.md",
      "status": "open",
      "title": "Skill quality fine-tuning: eliminate redundancy and normalize references",
      "updated_at": "2026-02-27T05:27:01.132427Z"
    },
    "spec": "# Skill Quality Fine-Tuning: Eliminate Redundancy and Normalize References\n\n## Overview\n\nAfter the fn-64 consolidation from 131 skills into 8 broad skills, the SKILL.md files and reference files have significant structural redundancy and inconsistencies that waste tokens and could degrade routing quality. This epic addresses three categories of issues:\n\n1. **Triple redundancy in domain SKILL.md files** \u2014 Routing Table, Scope bullets, and Companion Files sections all describe the same set of topics. The advisor adds a 4th and 5th layer. ~80% of SKILL.md content is redundant.\n2. **Reference file artifacts from standalone era** \u2014 107 files still have `# dotnet-*` slug titles (old skill names), ~121 files have Scope/OOS sections with 372 stale `[skill:]` refs pointing to 63 deleted skill names.\n3. **Stale documentation** \u2014 CONTRIBUTING-SKILLS.md describes `details.md` pattern (no skill uses it), style guide cites deleted skills, validator doesn't check reference files.\n\n### Testing Context\n\nNo memory entries confirm tests were run during the fn-64 consolidation. The eval harness was deleted in fn-64. Only structural validators remain (`validate-skills.sh`, `validate-marketplace.sh`), and these don't check reference files at all. This epic includes extending the validator to prevent regressions.\n\n### Design Decisions\n\nBased on research of the Agent Skills specification, Anthropic best practices, and cross-repo examples:\n\n- **Merge Routing Table + Companion Files** into a single enhanced Routing Table with a Description column. The Companion Files section is eliminated entirely \u2014 the Routing Table serves as the definitive file index.\n- **Keep `## Scope`** as high-level domain categories (6-10 bullets), not per-file granularity. Keep `## Out of scope` with `[skill:]` cross-refs. These are dotnet-artisan conventions (not spec-required) but serve disambiguation for an 8-skill plugin.\n- **Remove Scope/OOS from reference files.** These are holdovers from the standalone era. Removing them eliminates 372 stale `[skill:]` refs automatically and saves ~10-15 lines per file. The parent SKILL.md's Routing Table + Out of scope section provide sufficient boundary signals.\n- **Normalize reference titles** to human-readable format (e.g., `# Minimal APIs` not `# dotnet-minimal-apis`). The slug titles were old standalone skill names.\n- **Slim the advisor** by removing the per-topic exhaustive Routing Logic (127 lines) that duplicates every domain skill's routing table. Keep cross-domain routing rules and the lean Skill Catalog.\n- **Extend the validator** to check reference files for: title existence, no stale `[skill:]` refs, files listed in routing tables exist on disk.\n\n## Quick commands\n\n```bash\n# Validate after changes\n./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh\n\n# Count redundancy reduction\nwc -l skills/*/SKILL.md\n\n# Check for stale skill refs in references\ngrep -r '\\[skill:' skills/*/references/ | grep -v -E '\\[skill:(dotnet-advisor|dotnet-api|dotnet-csharp|dotnet-debugging|dotnet-devops|dotnet-testing|dotnet-tooling|dotnet-ui)\\]' | wc -l\n\n# Verify no dotnet-* slug titles remain\ngrep -r '^# dotnet-' skills/*/references/*.md | wc -l\n```\n\n## Acceptance\n\n- [ ] Each domain SKILL.md has a single Routing Table (no separate Companion Files section)\n- [ ] Scope sections contain 6-10 high-level domain bullets (not per-file echoes)\n- [ ] No \"Covers\" filler phrase in any skill description\n- [ ] All 145 reference file titles are human-readable (no `# dotnet-*` slugs, no missing titles)\n- [ ] Reference files have no `## Scope` or `## Out of scope` sections\n- [ ] Zero stale `[skill:]` references across all reference files\n- [ ] Advisor skill is under 120 lines (from current 238)\n- [ ] CONTRIBUTING-SKILLS.md uses `references/` pattern (no `details.md` references)\n- [ ] Style guide cites only current 8-skill names in examples\n- [ ] Validator checks reference files for title and stale cross-refs\n- [ ] `validate-skills.sh && validate-marketplace.sh` passes\n- [ ] similarity-baseline.json regenerated after description changes\n\n## References\n\n- Agent Skills Specification: https://agentskills.io/specification\n- Anthropic Best Practices: https://platform.claude.com/docs/en/agents-and-tools/agent-skills/best-practices\n- Validation script: `scripts/_validate_skills.py`\n- Style guide: `docs/skill-routing-style-guide.md`\n- Skill authoring guide: `CONTRIBUTING-SKILLS.md`\n- Prior consolidation: fn-64 (all 8 tasks done)\n"
  },
  "epic_id": "fn-65-skill-quality-fine-tuning-eliminate",
  "schema_version": 2,
  "tasks": [
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-27T05:27:06.716491Z",
        "depends_on": [],
        "epic": "fn-65-skill-quality-fine-tuning-eliminate",
        "id": "fn-65-skill-quality-fine-tuning-eliminate.1",
        "priority": null,
        "spec_path": ".flow/tasks/fn-65-skill-quality-fine-tuning-eliminate.1.md",
        "status": "todo",
        "title": "Restructure domain SKILL.md files: eliminate triple redundancy and fix descriptions",
        "updated_at": "2026-02-27T05:27:37.693381Z"
      },
      "id": "fn-65-skill-quality-fine-tuning-eliminate.1",
      "runtime": null,
      "spec": "# fn-65-skill-quality-fine-tuning-eliminate.1 Restructure domain SKILL.md files: eliminate triple redundancy and fix descriptions\n\n## Description\nRestructure all 7 domain SKILL.md files (dotnet-api, dotnet-csharp, dotnet-debugging, dotnet-devops, dotnet-testing, dotnet-tooling, dotnet-ui) to eliminate the triple redundancy between Routing Table, Scope, and Companion Files sections.\n\n**Size:** M\n**Files:** `skills/dotnet-api/SKILL.md`, `skills/dotnet-csharp/SKILL.md`, `skills/dotnet-debugging/SKILL.md`, `skills/dotnet-devops/SKILL.md`, `skills/dotnet-testing/SKILL.md`, `skills/dotnet-tooling/SKILL.md`, `skills/dotnet-ui/SKILL.md`\n\n## Approach\n\nFor each of the 7 domain SKILL.md files:\n\n1. **Merge Routing Table + Companion Files** into a single enhanced Routing Table with 4 columns: `| Topic | Keywords | Description | Companion File |`. The Description column absorbs the one-line descriptions from the old Companion Files section. Then delete the `## Companion Files` section entirely.\n\n2. **Trim `## Scope`** to 6-10 high-level domain category bullets. Currently Scope echoes per-file topics from the Routing Table. Instead, use broad groupings (e.g., for dotnet-api: \"ASP.NET Core web APIs (minimal and controller-based)\", \"API versioning, OpenAPI, and documentation\", \"Security, authentication, and input validation\"). Do NOT list every reference file topic.\n\n3. **Keep `## Out of scope`** unchanged \u2014 these already have good `[skill:]` cross-references.\n\n4. **Fix \"Covers\" filler** in descriptions for the 5 skills flagged by the validator. Rewrite using the Action + Domain + Differentiator formula per `docs/skill-routing-style-guide.md`. Keep budget-neutral.\n\n5. **Note:** `dotnet-debugging` has a different structure (no formal Routing Table, uses Diagnostic Workflow sections). Adapt the same principle: ensure no duplicate file listings, add a lean Routing Table, remove the Companion Files section.\n\n## Key context\n\n- The Companion Files section and Routing Table carry the same information in different formats. Example from `dotnet-api/SKILL.md`: Routing Table row `| Minimal APIs | endpoint, route group, filter, TypedResults | references/minimal-apis.md |` vs Companion Files bullet `- references/minimal-apis.md -- Minimal API route groups, filters, TypedResults, OpenAPI`.\n- Current total description chars: 2584 of 15600 budget (17% used). Plenty of room.\n- The \"Overview\" paragraphs with \"Baseline dependency\" and \"Most-shared companion\" guidance (lines 14-16 in most skills) should be preserved \u2014 these are unique loading hints.\n- 5 skills with \"Covers\" filler: check `scripts/_validate_skills.py` line 94-100 for the exact filler patterns.\n## Acceptance\n- [ ] Each domain SKILL.md has exactly ONE Routing Table (4 columns: Topic, Keywords, Description, Companion File)\n- [ ] No `## Companion Files` section exists in any SKILL.md\n- [ ] `## Scope` has 6-10 high-level bullets per skill (not per-file echoes)\n- [ ] `## Out of scope` preserved with all `[skill:]` cross-refs intact\n- [ ] Zero \"Covers\" filler phrases in any description (validator produces 0 filler warnings)\n- [ ] Overview paragraphs with baseline dependency / most-shared companion guidance preserved\n- [ ] `./scripts/validate-skills.sh` passes\n- [ ] Total description chars remain under 15600 budget\n## Done summary\nTBD\n\n## Evidence\n- Commits:\n- Tests:\n- PRs:\n"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-27T05:27:06.830888Z",
        "depends_on": [],
        "epic": "fn-65-skill-quality-fine-tuning-eliminate",
        "id": "fn-65-skill-quality-fine-tuning-eliminate.2",
        "priority": null,
        "spec_path": ".flow/tasks/fn-65-skill-quality-fine-tuning-eliminate.2.md",
        "status": "todo",
        "title": "Clean up 145 reference files: normalize titles, remove Scope/OOS, fix stale refs",
        "updated_at": "2026-02-27T05:27:59.947857Z"
      },
      "id": "fn-65-skill-quality-fine-tuning-eliminate.2",
      "runtime": null,
      "spec": "# fn-65-skill-quality-fine-tuning-eliminate.2 Clean up 145 reference files: normalize titles, remove Scope/OOS, fix stale refs\n\n## Description\nClean up all 145 reference files across the 8 skills: normalize titles, remove Scope/OOS sections, and fix stale cross-references.\n\n**Size:** M (mechanical changes per file, but high file count)\n**Files:** All `skills/*/references/*.md` files (~145 total)\n\n## Approach\n\n### 1. Normalize titles to human-readable format\n\nChange all 107 slug-style titles from `# dotnet-*` to human-readable format. The `dotnet-csharp` and `dotnet-debugging` skills already use human-readable titles \u2014 follow their convention.\n\nMapping pattern: `# dotnet-minimal-apis` \u2192 `# Minimal APIs`, `# dotnet-efcore-patterns` \u2192 `# EF Core Patterns`, `# dotnet-gha-patterns` \u2192 `# GitHub Actions Patterns`.\n\nAdd titles to the 3 files missing them entirely: `skills/dotnet-tooling/references/project-analysis.md`, `skills/dotnet-tooling/references/solution-navigation.md`, `skills/dotnet-tooling/references/version-detection.md`.\n\n### 2. Remove Scope/OOS sections from reference files\n\nRemove `## Scope` and `## Out of scope` sections from the ~121 reference files that have them. These are holdovers from the standalone skill era and contain 372 stale `[skill:]` refs pointing to 63 deleted skill names.\n\nAlso remove standalone `Cross-references:` lines that appear after Scope/OOS sections.\n\nThe 16 `dotnet-debugging` reference files and some `dotnet-csharp` references don't have Scope/OOS \u2014 skip those (they already comply).\n\n### 3. Fix remaining stale `[skill:]` refs in body text\n\nAfter removing Scope/OOS sections, check for any remaining stale `[skill:]` refs in body text. These are refs to the old 131 skill names (e.g., `[skill:dotnet-minimal-apis]`). For each:\n- If it's a \"See also\" pointer within the same skill domain, convert to a relative markdown link: `See [Minimal APIs](minimal-apis.md)` or remove if redundant.\n- If it crosses skill domains, convert to the current broad skill name: `[skill:dotnet-api]`.\n\n### 4. Verify with grep\n\nAfter all changes, verify zero stale refs remain:\n```bash\ngrep -r '\\[skill:' skills/*/references/ | grep -v -E '\\[skill:(dotnet-advisor|dotnet-api|dotnet-csharp|dotnet-debugging|dotnet-devops|dotnet-testing|dotnet-tooling|dotnet-ui)\\]'\n```\n\n## Key context\n\n- Reference files are loaded on-demand by Claude, not at startup. Removing Scope/OOS saves ~10-15 lines per file loaded.\n- The validator (`scripts/_validate_skills.py`) does NOT check reference files \u2014 so there's no automated gate currently. Task 4 will add one.\n- Some reference files have both a title and a `> brief description` line below it. Keep description lines \u2014 they serve as a quick summary when Claude previews the file.\n## Acceptance\n- [ ] All 145 reference files have human-readable H1 titles (no `# dotnet-*` slugs)\n- [ ] No reference file is missing an H1 title\n- [ ] No reference file has a `## Scope` section\n- [ ] No reference file has a `## Out of scope` section\n- [ ] No reference file has a standalone `Cross-references:` line\n- [ ] Zero stale `[skill:]` refs in any reference file (only the 8 current skill names allowed)\n- [ ] `grep -r '^\\# dotnet-' skills/*/references/*.md` returns zero matches\n- [ ] `grep -r '\\[skill:' skills/*/references/ | grep -v -E '\\[skill:(dotnet-advisor|dotnet-api|dotnet-csharp|dotnet-debugging|dotnet-devops|dotnet-testing|dotnet-tooling|dotnet-ui)\\]'` returns zero matches\n## Done summary\nTBD\n\n## Evidence\n- Commits:\n- Tests:\n- PRs:\n"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-27T05:27:06.938868Z",
        "depends_on": [
          "fn-65-skill-quality-fine-tuning-eliminate.1"
        ],
        "epic": "fn-65-skill-quality-fine-tuning-eliminate",
        "id": "fn-65-skill-quality-fine-tuning-eliminate.3",
        "priority": null,
        "spec_path": ".flow/tasks/fn-65-skill-quality-fine-tuning-eliminate.3.md",
        "status": "todo",
        "title": "Slim advisor skill and regenerate similarity baseline",
        "updated_at": "2026-02-27T05:28:28.323555Z"
      },
      "id": "fn-65-skill-quality-fine-tuning-eliminate.3",
      "runtime": null,
      "spec": "# fn-65-skill-quality-fine-tuning-eliminate.3 Slim advisor skill and regenerate similarity baseline\n\n## Description\nSlim the advisor skill from 238 lines to under 120 lines by removing redundant routing logic, and regenerate the similarity baseline after all description changes from Task 1.\n\n**Size:** M\n**Files:** `skills/dotnet-advisor/SKILL.md`, `scripts/similarity-baseline.json`\n\n## Approach\n\n### 1. Slim the advisor\n\nThe advisor currently has 5 sections that overlap with domain skills:\n- **Skill Catalog** (L49-88, ~40 lines): Lists each skill's topics and key companion files \u2014 duplicates each skill's own Routing Table.\n- **Routing Logic** (L92-219, ~127 lines): Exhaustive decision tree mapping specific topics to specific companion files within each domain skill \u2014 duplicates every domain skill's Routing Table.\n\n**Keep:**\n- Overview and role description (L1-22)\n- Immediate Routing Actions (L24-47): The initial triage rules (these are unique to the advisor)\n- A lean Skill Catalog (~20 lines): One row per skill with skill name, 1-line summary, and key differentiator. No per-file detail.\n- Default Quality Rule (currently L221-230)\n- First Step instructions (currently L232-238)\n- Specialist Agent Routing (if present)\n- The `[skill:]` cross-ref that loads `dotnet-csharp` as baseline dependency\n\n**Remove:**\n- The exhaustive Routing Logic decision tree (L92-219). Each domain skill's own Routing Table handles this.\n- Per-file detail in the Skill Catalog. The lean catalog just needs enough to route to the right skill, not to the right reference file.\n\n**Keep cross-domain routing rules** \u2014 these are currently embedded in the Routing Logic and handle queries that span multiple skills (e.g., \"Starting a New Project\" loads both dotnet-tooling and dotnet-api). Extract these as explicit cross-domain rules in the lean catalog or a small dedicated section.\n\n### 2. Fix advisor description if it has \"Covers\" filler\n\nCheck and fix if applicable, using the same style guide rules as Task 1.\n\n### 3. Fix the OOS bullet missing `[skill:]` attribution\n\nLine 23 of the current advisor has an OOS bullet without a `[skill:]` ref (flagged by validator as WARN). Add the appropriate cross-reference.\n\n### 4. Regenerate similarity baseline\n\nAfter Task 1's description changes and any advisor description changes:\n```bash\npython3 scripts/_validate_skills.py --regenerate-baseline\n```\nOr follow the baseline regeneration workflow documented in the validator script.\n\n## Key context\n\n- The advisor is always loaded first \u2014 it is the routing entry point. If it is too lean, models may fail to route. If too verbose, it wastes tokens on redundant info that domain skills already contain.\n- The advisor's Routing Logic currently handles cross-domain scenarios (e.g., mapping \"Starting a New Project\" to both `dotnet-tooling` references and `dotnet-api` references). These cross-domain rules must be preserved somewhere.\n- 14 agent files reference `[skill:dotnet-advisor]` in their Preloaded Skills. The advisor's lean catalog must still contain enough info for agents to discover skills through it.\n- Target: under 120 lines (from 238), with all unique routing intelligence preserved.\n## Acceptance\n- [ ] Advisor SKILL.md is under 120 lines\n- [ ] Lean Skill Catalog has one row per skill (8 rows) with name, summary, differentiator\n- [ ] No per-file detail in advisor (no references to specific companion files within domain skills)\n- [ ] Cross-domain routing rules preserved (queries spanning multiple skills still route correctly)\n- [ ] No \"Covers\" filler in advisor description\n- [ ] OOS bullet on line 23 has `[skill:]` attribution\n- [ ] `similarity-baseline.json` regenerated and committed\n- [ ] `./scripts/validate-skills.sh` passes with zero warnings\n- [ ] `./scripts/validate-marketplace.sh` passes\n## Done summary\nTBD\n\n## Evidence\n- Commits:\n- Tests:\n- PRs:\n"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-27T05:27:07.047649Z",
        "depends_on": [
          "fn-65-skill-quality-fine-tuning-eliminate.1",
          "fn-65-skill-quality-fine-tuning-eliminate.2",
          "fn-65-skill-quality-fine-tuning-eliminate.3"
        ],
        "epic": "fn-65-skill-quality-fine-tuning-eliminate",
        "id": "fn-65-skill-quality-fine-tuning-eliminate.4",
        "priority": null,
        "spec_path": ".flow/tasks/fn-65-skill-quality-fine-tuning-eliminate.4.md",
        "status": "todo",
        "title": "Update docs and extend validator for reference file checks",
        "updated_at": "2026-02-27T05:28:54.188875Z"
      },
      "id": "fn-65-skill-quality-fine-tuning-eliminate.4",
      "runtime": null,
      "spec": "# fn-65-skill-quality-fine-tuning-eliminate.4 Update docs and extend validator for reference file checks\n\n## Description\nUpdate stale documentation and extend the validator to check reference files, encoding the new conventions from Tasks 1-3.\n\n**Size:** M\n**Files:** `CONTRIBUTING-SKILLS.md`, `docs/skill-routing-style-guide.md`, `scripts/_validate_skills.py`\n\n## Approach\n\n### 1. Fix CONTRIBUTING-SKILLS.md\n\nReplace all `details.md` references with the `references/` multi-file pattern:\n\n- **Lines 60-68** (folder structure diagram): Change `details.md` to `references/` directory with 2-3 example files.\n- **Line 105**: Change \"extract it into a `details.md` file\" to \"extract it into files under `references/`\".\n- **Line 108**: Change the `details.md` example to a `references/` example.\n- **Lines 262, 289**: Update progressive disclosure layers and size limit sections from `details.md` to `references/`.\n- **Line 111** already mentions `references/` correctly \u2014 ensure surrounding text is consistent.\n\n### 2. Fix style guide\n\n- **Line 3**: Remove stale \"T5--T10 sweep tasks\" reference. Just state this is the canonical reference.\n- **Line 134**: Replace `dotnet-version-detection` (deleted skill) in cycle detection example with a current skill name (e.g., `dotnet-tooling`).\n- **Lines 236-251**: Replace the invocation contract positive example (drawn from deleted `dotnet-version-detection`) with an example from a current 8-skill name (use `dotnet-csharp` or `dotnet-tooling`).\n- **Line 277**: Update \"130+ skills\" rollout language to \"8 skills\".\n- **Add a new section** on the `references/` companion file convention: when to use, naming convention (human-readable titles), no Scope/OOS required, progressive disclosure role.\n\n### 3. Extend validator for reference files\n\nAdd checks to `scripts/_validate_skills.py` for files matching `skills/*/references/*.md`:\n\n- **Title check**: Every reference file must have an H1 title (`# ...`). It must NOT start with `# dotnet-` (slug-style).\n- **No Scope/OOS**: Reference files must NOT have `## Scope` or `## Out of scope` headings.\n- **Stale cross-ref check**: Any `[skill:X]` reference must resolve to one of the 8 current skill directory names. Report stale refs as errors.\n- **Routing table consistency**: Every companion file listed in a SKILL.md Routing Table must exist on disk. Report missing files as errors.\n\nRespect the existing validator architecture: add reference checks as a new function called from the main validation loop. Use the same WARN/FAIL severity model.\n\n## Key context\n\n- The validator currently processes only `SKILL.md` and agent files (see `_validate_skills.py` main loop). Reference files are invisible to it.\n- The existing filler-phrase detection (line 94-100) and invocation contract checks are good patterns to follow for the new reference file checks.\n- The valid skill names for cross-ref resolution are the directory names under `skills/`: dotnet-advisor, dotnet-api, dotnet-csharp, dotnet-debugging, dotnet-devops, dotnet-testing, dotnet-tooling, dotnet-ui.\n- CONTRIBUTING-SKILLS.md is 480 lines. The `details.md` pattern appears in 5 locations. Replace all consistently.\n## Acceptance\n- [ ] CONTRIBUTING-SKILLS.md has zero references to `details.md`\n- [ ] CONTRIBUTING-SKILLS.md folder structure shows `references/` directory pattern\n- [ ] Style guide positive example uses a current 8-skill name (not `dotnet-version-detection`)\n- [ ] Style guide has no \"T5--T10\" references\n- [ ] Style guide says \"8 skills\" not \"130+ skills\" in rollout section\n- [ ] Style guide has a new section documenting the `references/` companion file convention\n- [ ] Validator checks reference files for: H1 title exists, no slug titles, no Scope/OOS, stale cross-refs, routing table file existence\n- [ ] `./scripts/validate-skills.sh` passes (including new reference checks)\n- [ ] `./scripts/validate-marketplace.sh` passes\n- [ ] Running validator against a test file with a stale `[skill:dotnet-minimal-apis]` ref reports an error\n## Done summary\nTBD\n\n## Evidence\n- Commits:\n- Tests:\n- PRs:\n"
    }
  ]
}
