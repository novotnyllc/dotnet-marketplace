{
  "created_at": "2026-02-27T07:45:01.972902Z",
  "epic": {
    "data": {
      "branch_name": "fn-65-skill-quality-fine-tuning-eliminate",
      "completion_review_status": "unknown",
      "completion_reviewed_at": null,
      "created_at": "2026-02-27T05:26:30.497978Z",
      "default_impl": null,
      "default_review": null,
      "default_sync": null,
      "depends_on_epics": [],
      "id": "fn-65-skill-quality-fine-tuning-eliminate",
      "next_task": 1,
      "plan_review_status": "ship",
      "plan_reviewed_at": "2026-02-27T05:45:51.116774Z",
      "spec_path": ".flow/specs/fn-65-skill-quality-fine-tuning-eliminate.md",
      "status": "open",
      "title": "Skill quality fine-tuning: eliminate redundancy and normalize references",
      "updated_at": "2026-02-27T05:45:51.122325Z"
    },
    "spec": "# Skill Quality Fine-Tuning: Eliminate Redundancy and Normalize References\n\n## Overview\n\nAfter the fn-64 consolidation from 131 skills into 8 broad skills, the SKILL.md files and reference files have significant structural redundancy and inconsistencies that waste tokens and could degrade routing quality. This epic addresses three categories of issues:\n\n1. **Triple redundancy in domain SKILL.md files** \u2014 Routing Table, Scope bullets, and Companion Files sections all describe the same set of topics. The advisor adds a 4th and 5th layer. ~80% of SKILL.md content is redundant.\n2. **Reference file artifacts from standalone era** \u2014 107 files still have `# dotnet-*` slug titles (old skill names), ~121 files have Scope/OOS sections with 372 stale `[skill:]` refs pointing to 63 deleted skill names.\n3. **Stale documentation** \u2014 CONTRIBUTING-SKILLS.md describes `details.md` pattern (no skill uses it), style guide cites deleted skills, validator doesn't check reference files.\n\n### Testing Context\n\nNo memory entries confirm tests were run during the fn-64 consolidation. The eval harness was deleted in fn-64. Only structural validators remain (`validate-skills.sh`, `validate-marketplace.sh`), and these don't check reference files at all. This epic includes extending the validator to prevent regressions.\n\n### Design Decisions\n\nBased on research of the Agent Skills specification, Anthropic best practices, and cross-repo examples:\n\n- **Merge Routing Table + Companion Files** into a single enhanced Routing Table with a Description column. The Companion Files section is eliminated entirely \u2014 the Routing Table serves as the definitive file index.\n- **Keep `## Scope`** as high-level domain categories (6-10 bullets), not per-file granularity. Keep `## Out of scope` with `[skill:]` cross-refs \u2014 preserve intent and cross-skill attributions but allow small edits to keep boundaries crisp after the routing-table merge.\n- **Remove Scope/OOS from reference files.** These are holdovers from the standalone era. Removing them eliminates 372 stale `[skill:]` refs automatically and saves ~10-15 lines per file. The parent SKILL.md's Routing Table + Out of scope section provide sufficient boundary signals.\n- **Handle `Cross-references:` lines**: Remove only the legacy `Cross-references:` lines that accompanied Scope/OOS blocks. Standalone cross-reference lines in modern-format files (e.g., `dotnet-csharp/references/coding-standards.md`) are kept as-is \u2014 they serve a useful navigation role.\n- **Normalize reference titles** to human-readable Title Case format, preserving known acronyms (EF, MSBuild, gRPC, WinUI, MAUI, AOT, WPF, WinForms, TUI, LINQ, DI). For files with code fences before the H1 title, move the code fence below the H1 during cleanup.\n- **Slim the advisor** by removing the per-topic exhaustive Routing Logic (127 lines) that duplicates every domain skill's routing table. Replace with a lean Skill Catalog (max 8 rows, no `references/*.md` paths) plus a small \"Cross-domain playbooks\" section (5-10 bullets naming skills only, not reference files) to preserve multi-skill routing recipes.\n- **Extend the validator** to check reference files for: title existence (fence-aware H1 scanning), no stale `[skill:]` refs (fence-aware to avoid false positives in code examples). Reference `[skill:]` refs resolve against the same `known_ids` set used for SKILL.md (skills + agents), with a WARN for refs to agents in case the convention changes. Routing table file existence checks parse the `Companion File` column by header name, not position.\n- **`[skill:]` syntax**: Used for both skills and agents. The `<id>` must match either a skill directory name or an agent file stem. This is an existing convention \u2014 document it explicitly in the style guide.\n\n## Quick commands\n\n```bash\n# Validate after changes\n./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh\n\n# Count redundancy reduction\nwc -l skills/*/SKILL.md\n\n# Quick check for stale refs (fence-naive, may flag agent refs \u2014 validator is authoritative)\n# Checks for old 131-skill slug names like [skill:dotnet-minimal-apis]\ngrep -rn '\\[skill:dotnet-[a-z]' skills/*/references/ | grep -v -E '\\[skill:(dotnet-advisor|dotnet-api|dotnet-csharp|dotnet-debugging|dotnet-devops|dotnet-testing|dotnet-tooling|dotnet-ui)\\]' | wc -l\n\n# Verify no dotnet-* slug titles remain\ngrep -r '^# dotnet-' skills/*/references/*.md | wc -l\n```\n\n## Acceptance\n\n- [ ] Each domain SKILL.md has a single Routing Table (no separate Companion Files section)\n- [ ] Scope sections contain 6-10 high-level domain bullets (not per-file echoes)\n- [ ] Out of scope sections preserve intent and `[skill:]` cross-refs (small edits allowed for clarity)\n- [ ] No \"Covers\" filler phrase in any skill description\n- [ ] All 145 reference file titles are human-readable Title Case (no `# dotnet-*` slugs, no missing titles)\n- [ ] Title casing follows convention: Title Case, preserving known acronyms (EF, MSBuild, gRPC, WinUI, MAUI, AOT)\n- [ ] Reference files have no `## Scope` or `## Out of scope` sections\n- [ ] Legacy `Cross-references:` lines (accompanying Scope/OOS blocks) removed; modern standalone cross-ref lines preserved\n- [ ] Zero stale `[skill:]` references across all reference files (resolves against skills + agents)\n- [ ] Advisor has no `references/*.md` paths; Skill Catalog is max 8 rows; Routing Logic section removed\n- [ ] Advisor has a \"Cross-domain playbooks\" section with 5-10 bullets naming skills only\n- [ ] CONTRIBUTING-SKILLS.md uses `references/` pattern (no `details.md` references)\n- [ ] Style guide cites only current 8-skill names in examples\n- [ ] Style guide explicitly documents that `[skill:]` is used for both skills and agents\n- [ ] Validator checks reference files (fence-aware H1 title, fence-aware stale cross-refs, routing table file existence by column name)\n- [ ] `validate-skills.sh && validate-marketplace.sh` passes\n- [ ] similarity-baseline.json regenerated via `validate-similarity.py` workflow\n\n## Task Landing Order\n\nTasks 1 and 2 are parallel (disjoint files). Task 3 depends on Task 1. Task 4 depends on all three.\n\nRecommended landing order: Task 2 first (bulk reference cleanup, largest diff), then Task 1 (SKILL.md restructure), then Task 3 (advisor + baseline), then Task 4 (validator + docs last, encodes final conventions).\n\n## References\n\n- Agent Skills Specification: https://agentskills.io/specification\n- Anthropic Best Practices: https://platform.claude.com/docs/en/agents-and-tools/agent-skills/best-practices\n- Validation script: `scripts/_validate_skills.py`\n- Similarity validation: `scripts/validate-similarity.py`\n- Style guide: `docs/skill-routing-style-guide.md`\n- Skill authoring guide: `CONTRIBUTING-SKILLS.md`\n- Prior consolidation: fn-64 (all 8 tasks done)\n"
  },
  "epic_id": "fn-65-skill-quality-fine-tuning-eliminate",
  "schema_version": 2,
  "tasks": [
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-27T05:27:06.716491Z",
        "depends_on": [],
        "epic": "fn-65-skill-quality-fine-tuning-eliminate",
        "id": "fn-65-skill-quality-fine-tuning-eliminate.1",
        "priority": null,
        "spec_path": ".flow/tasks/fn-65-skill-quality-fine-tuning-eliminate.1.md",
        "status": "todo",
        "title": "Restructure domain SKILL.md files: eliminate triple redundancy and fix descriptions",
        "updated_at": "2026-02-27T05:36:29.148927Z"
      },
      "id": "fn-65-skill-quality-fine-tuning-eliminate.1",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-27T06:17:01.874499Z",
        "evidence": {
          "commits": [
            "e78347ec27f43affaa180430b6ec38e382b894c1"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-27T06:32:57.198223Z"
      },
      "spec": "# fn-65-skill-quality-fine-tuning-eliminate.1 Restructure domain SKILL.md files: eliminate triple redundancy and fix descriptions\n\n## Description\nRestructure all 7 domain SKILL.md files (dotnet-api, dotnet-csharp, dotnet-debugging, dotnet-devops, dotnet-testing, dotnet-tooling, dotnet-ui) to eliminate the triple redundancy between Routing Table, Scope, and Companion Files sections.\n\n**Size:** M\n**Files:** `skills/dotnet-api/SKILL.md`, `skills/dotnet-csharp/SKILL.md`, `skills/dotnet-debugging/SKILL.md`, `skills/dotnet-devops/SKILL.md`, `skills/dotnet-testing/SKILL.md`, `skills/dotnet-tooling/SKILL.md`, `skills/dotnet-ui/SKILL.md`\n\n## Approach\n\nFor each of the 7 domain SKILL.md files:\n\n1. **Merge Routing Table + Companion Files** into a single enhanced Routing Table with 4 columns: `| Topic | Keywords | Description | Companion File |`. The Description column absorbs the one-line descriptions from the old Companion Files section. Then delete the `## Companion Files` section entirely.\n\n2. **Trim `## Scope`** to 6-10 high-level domain category bullets. Currently Scope echoes per-file topics from the Routing Table. Instead, use broad groupings (e.g., for dotnet-api: \"ASP.NET Core web APIs (minimal and controller-based)\", \"API versioning, OpenAPI, and documentation\", \"Security, authentication, and input validation\"). Do NOT list every reference file topic.\n\n3. **Preserve `## Out of scope` intent and `[skill:]` cross-refs.** Do not copy OOS verbatim \u2014 review each bullet after the merge to ensure boundaries remain crisp. If a Companion Files removal makes an OOS bullet vague, tighten the wording. All `[skill:]` attributions must remain.\n\n4. **Fix \"Covers\" filler** in all skill descriptions flagged by the validator's filler-phrase detection. Rewrite using the Action + Domain + Differentiator formula per `docs/skill-routing-style-guide.md`. Keep budget-neutral.\n\n5. **Note:** `dotnet-debugging` has a different structure (no formal Routing Table, uses Diagnostic Workflow sections). Adapt the same principle: ensure no duplicate file listings, add a lean Routing Table, remove the Companion Files section.\n\n## Key context\n\n- The Companion Files section and Routing Table carry the same information in different formats. Example from `dotnet-api/SKILL.md`: Routing Table row `| Minimal APIs | endpoint, route group, filter, TypedResults | references/minimal-apis.md |` vs Companion Files bullet `- references/minimal-apis.md -- Minimal API route groups, filters, TypedResults, OpenAPI`.\n- Current total description chars: 2584 of 15600 budget (17% used). Plenty of room.\n- The \"Overview\" paragraphs with \"Baseline dependency\" and \"Most-shared companion\" guidance (lines 14-16 in most skills) should be preserved \u2014 these are unique loading hints.\n- 5 skills with \"Covers\" filler: check `scripts/_validate_skills.py` line 94-100 for the exact filler patterns.\n\n## Acceptance\n- [ ] Each domain SKILL.md has exactly ONE Routing Table (4 columns: Topic, Keywords, Description, Companion File)\n- [ ] No `## Companion Files` section exists in any SKILL.md\n- [ ] `## Scope` has 6-10 high-level bullets per skill (not per-file echoes)\n- [ ] `## Out of scope` preserves intent and all `[skill:]` cross-refs (small edits allowed for clarity after merge)\n- [ ] Zero \"Covers\" filler phrases in any description (validator produces 0 filler warnings)\n- [ ] Overview paragraphs with baseline dependency / most-shared companion guidance preserved\n- [ ] `./scripts/validate-skills.sh` passes\n- [ ] Total description chars remain under 15600 budget\n\n## Done summary\nRestructured all 7 domain SKILL.md files to eliminate triple redundancy: merged Routing Table and Companion Files into a single 4-column Routing Table (Topic, Keywords, Description, Companion File), removed all Companion Files sections, trimmed Scope to 6-10 high-level bullets, fixed 5 \"Covers\" filler phrases in descriptions, and added a Routing Table to dotnet-debugging. Budget reduced from 2584 to 2525 chars.\n## Evidence\n- Commits: e78347ec27f43affaa180430b6ec38e382b894c1\n- Tests: ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-27T05:27:06.830888Z",
        "depends_on": [],
        "epic": "fn-65-skill-quality-fine-tuning-eliminate",
        "id": "fn-65-skill-quality-fine-tuning-eliminate.2",
        "priority": null,
        "spec_path": ".flow/tasks/fn-65-skill-quality-fine-tuning-eliminate.2.md",
        "status": "todo",
        "title": "Clean up 145 reference files: normalize titles, remove Scope/OOS, fix stale refs",
        "updated_at": "2026-02-27T05:37:00.490433Z"
      },
      "id": "fn-65-skill-quality-fine-tuning-eliminate.2",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-27T06:38:53.078150Z",
        "evidence": {
          "commits": [
            "28c0d84",
            "1ac2622"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh",
            "grep -r '^# dotnet-' skills/*/references/*.md (0 matches)",
            "grep -rl '## Scope' skills/*/references/*.md (0 matches)",
            "grep -rl '## Out of scope' skills/*/references/*.md (0 matches)"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-27T06:54:33.004374Z"
      },
      "spec": "# fn-65-skill-quality-fine-tuning-eliminate.2 Clean up 145 reference files: normalize titles, remove Scope/OOS, fix stale refs\n\n## Description\nClean up all 145 reference files across the 8 skills: normalize titles, remove Scope/OOS sections, and fix stale cross-references.\n\n**Size:** M (mechanical changes per file, high file count \u2014 land this task first to establish clean baseline before other tasks)\n**Files:** All `skills/*/references/*.md` files (~145 total)\n\n## Approach\n\n### 1. Normalize titles to human-readable Title Case\n\nChange all 107 slug-style titles from `# dotnet-*` to human-readable Title Case. The `dotnet-csharp` and `dotnet-debugging` skills already use human-readable titles \u2014 follow their convention.\n\n**Title casing convention:**\n- Use Title Case (capitalize first letter of each significant word)\n- Preserve known acronyms: EF, MSBuild, gRPC, WinUI, MAUI, AOT, WPF, WinForms, TUI, LINQ, DI, XML, API, HTTP, CLI, NuGet, MSIX, CI, CD, ADO, GHA, TFM, BOM, SSR, WASM, OIDC, JWT, XAML, MVVM, P/Invoke, etc.\n- Prefer short, descriptive titles: `# Minimal APIs`, `# EF Core Patterns`, `# GitHub Actions Patterns`\n- Do NOT prefix with \"dotnet-\" or \".NET\" unless the title would be ambiguous without it\n\n**Mapping examples:** `# dotnet-minimal-apis` \u2192 `# Minimal APIs`, `# dotnet-efcore-patterns` \u2192 `# EF Core Patterns`, `# dotnet-gha-patterns` \u2192 `# GitHub Actions Patterns`, `# dotnet-msbuild-authoring` \u2192 `# MSBuild Authoring`.\n\n**Files with code fences before the H1 title** (e.g., `skills/dotnet-tooling/references/version-detection.md`, `project-analysis.md`, `solution-navigation.md`): Move the code fence below the H1 title so the title is always the first non-blank line. This simplifies validation and gives Claude immediate context when previewing.\n\n### 2. Remove Scope/OOS sections from reference files\n\nRemove `## Scope` and `## Out of scope` sections from the ~121 reference files that have them. These are holdovers from the standalone skill era and contain 372 stale `[skill:]` refs pointing to 63 deleted skill names.\n\n**Also remove legacy `Cross-references:` lines** that accompanied Scope/OOS blocks (typically the line immediately after OOS). These are the lines formatted as `Cross-references: [skill:dotnet-foo], [skill:dotnet-bar]`.\n\n**Preserve modern standalone cross-reference lines** in files that are already in the modern format (e.g., `dotnet-csharp/references/coding-standards.md` has a `Cross-references:` line without Scope/OOS \u2014 leave it as-is).\n\nThe 16 `dotnet-debugging` reference files don't have Scope/OOS \u2014 skip those.\n\n### 3. Fix remaining stale `[skill:]` refs in body text\n\nAfter removing Scope/OOS sections, check for any remaining stale `[skill:]` refs in body text (outside code fences). For each:\n- If it's a \"See also\" pointer within the same skill domain, convert to a relative markdown link: `See [Minimal APIs](minimal-apis.md)` or remove if redundant.\n- If it crosses skill domains, convert to the current broad skill name: `[skill:dotnet-api]`.\n\n**Important:** Do not flag `[skill:]` refs inside code fences or markdown examples \u2014 those are illustrative and should be left alone.\n\n### 4. Verify with grep\n\nAfter all changes, verify zero stale refs remain (fence-naive quick check \u2014 validator will do fence-aware check in Task 4):\n```bash\ngrep -r '\\[skill:' skills/*/references/ | grep -v -E '\\[skill:(dotnet-advisor|dotnet-api|dotnet-csharp|dotnet-debugging|dotnet-devops|dotnet-testing|dotnet-tooling|dotnet-ui)\\]'\n```\n\nNote: This quick check may flag legitimate agent refs. The full validator (Task 4) resolves against `known_ids` (skills + agents) for authoritative checking.\n\n## Key context\n\n- Reference files are loaded on-demand by Claude, not at startup. Removing Scope/OOS saves ~10-15 lines per file loaded.\n- The validator (`scripts/_validate_skills.py`) does NOT check reference files \u2014 so there's no automated gate currently. Task 4 will add one.\n- Some reference files have both a title and a `> brief description` line below it. Keep description lines \u2014 they serve as a quick summary when Claude previews the file.\n- Valid `[skill:]` targets include both skill directory names AND agent file stems (e.g., `[skill:dotnet-architect]` is valid).\n\n## Acceptance\n- [ ] All 145 reference files have human-readable Title Case H1 titles (no `# dotnet-*` slugs)\n- [ ] Title casing follows convention: Title Case with known acronyms preserved (EF, MSBuild, gRPC, etc.)\n- [ ] No reference file is missing an H1 title\n- [ ] No reference file has a code fence before its H1 title (moved below)\n- [ ] No reference file has a `## Scope` section\n- [ ] No reference file has a `## Out of scope` section\n- [ ] Legacy `Cross-references:` lines (accompanying Scope/OOS blocks) removed\n- [ ] Modern standalone cross-reference lines in already-compliant files preserved\n- [ ] Zero stale `[skill:]` refs in reference file body text (only current skill names and agent stems allowed)\n- [ ] `grep -r '^\\# dotnet-' skills/*/references/*.md` returns zero matches\n\n## Done summary\nNormalized all 145 reference files: converted 115 slug-style titles to human-readable Title Case with acronym preservation, removed Scope/OOS sections from 121 files (eliminating 372 stale skill refs and ~2,500 lines), fixed stale cross-references in body text, moved code fences below H1 titles, and stripped leading blank lines. Modern standalone cross-reference lines in dotnet-csharp files preserved. Review feedback addressed (double blank lines, duplicate skill ref).\n## Evidence\n- Commits: 28c0d84, 1ac2622\n- Tests: ./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh, grep -r '^# dotnet-' skills/*/references/*.md (0 matches), grep -rl '## Scope' skills/*/references/*.md (0 matches), grep -rl '## Out of scope' skills/*/references/*.md (0 matches)\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-27T05:27:06.938868Z",
        "depends_on": [
          "fn-65-skill-quality-fine-tuning-eliminate.1"
        ],
        "epic": "fn-65-skill-quality-fine-tuning-eliminate",
        "id": "fn-65-skill-quality-fine-tuning-eliminate.3",
        "priority": null,
        "spec_path": ".flow/tasks/fn-65-skill-quality-fine-tuning-eliminate.3.md",
        "status": "todo",
        "title": "Slim advisor skill and regenerate similarity baseline",
        "updated_at": "2026-02-27T05:37:29.833011Z"
      },
      "id": "fn-65-skill-quality-fine-tuning-eliminate.3",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-27T07:10:41.131059Z",
        "evidence": {
          "commits": [
            "38b418a",
            "178ea42"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh",
            "python3 scripts/validate-similarity.py --repo-root . --baseline scripts/similarity-baseline.json --suppressions scripts/similarity-suppressions.json"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-27T07:24:11.272654Z"
      },
      "spec": "# fn-65-skill-quality-fine-tuning-eliminate.3 Slim advisor skill and regenerate similarity baseline\n\n## Description\nSlim the advisor skill by removing redundant routing logic, add a cross-domain playbooks section, and regenerate the similarity baseline after all description changes from Task 1.\n\n**Size:** M\n**Files:** `skills/dotnet-advisor/SKILL.md`, `scripts/similarity-baseline.json`\n\n## Approach\n\n### 1. Slim the advisor\n\nThe advisor currently has 5 sections that overlap with domain skills:\n- **Skill Catalog** (L49-88, ~40 lines): Lists each skill's topics and key companion files \u2014 duplicates each skill's own Routing Table.\n- **Routing Logic** (L92-219, ~127 lines): Exhaustive decision tree mapping specific topics to specific companion files within each domain skill \u2014 duplicates every domain skill's Routing Table.\n\n**Keep:**\n- Overview and role description (L1-22)\n- Immediate Routing Actions (L24-47): The initial triage rules (these are unique to the advisor)\n- Default Quality Rule (currently L221-230)\n- First Step instructions (currently L232-238)\n- Specialist Agent Routing (if present)\n- The `[skill:]` cross-ref that loads `dotnet-csharp` as baseline dependency\n\n**Replace Skill Catalog** with a lean 8-row table: `| Skill | Summary | Differentiator |`. No per-file detail, no `references/*.md` paths. Just enough for the model to route to the right skill.\n\n**Remove Routing Logic** entirely. Each domain skill's own Routing Table handles topic-to-file mapping.\n\n**Add \"Cross-domain playbooks\" section** (5-10 bullets) to preserve multi-skill routing recipes that currently live only in the Routing Logic. Name skills only, not reference files:\n- \"New API service: [skill:dotnet-tooling] + [skill:dotnet-api] + [skill:dotnet-devops] + [skill:dotnet-testing]\"\n- \"Starting a new project: [skill:dotnet-tooling] + [skill:dotnet-csharp]\"\n- etc.\n\n### 2. Fix advisor description if it has \"Covers\" filler\n\nCheck and fix if applicable, using the same style guide rules as Task 1.\n\n### 3. Fix the OOS bullet missing `[skill:]` attribution\n\nLine 23 of the current advisor has an OOS bullet without a `[skill:]` ref (flagged by validator as WARN). Add the appropriate cross-reference.\n\n### 4. Regenerate similarity baseline\n\nThe similarity baseline is managed by `scripts/validate-similarity.py`, NOT `_validate_skills.py`. After Task 1's description changes and any advisor description changes:\n\n1. Run similarity validation to see current state: `python3 scripts/validate-similarity.py`\n2. If pairs changed, update `scripts/similarity-baseline.json` with the new pairs output\n3. Verify the updated baseline passes: `python3 scripts/validate-similarity.py`\n\nRead `scripts/validate-similarity.py` to understand the exact regeneration workflow before executing.\n\n## Key context\n\n- The advisor is always loaded first \u2014 it is the routing entry point. The lean catalog must still contain enough info for models and agents to discover skills through it.\n- The advisor's Routing Logic currently handles cross-domain scenarios (e.g., mapping \"Starting a New Project\" to both `dotnet-tooling` and `dotnet-api`). The new \"Cross-domain playbooks\" section explicitly preserves these recipes.\n- 14 agent files reference `[skill:dotnet-advisor]` in their Preloaded Skills. The lean catalog must still serve agent discovery.\n- `scripts/validate-similarity.py` owns the baseline, not `_validate_skills.py`.\n\n## Acceptance\n- [ ] Advisor Routing Logic section removed entirely\n- [ ] Advisor Skill Catalog is max 8 rows, no `references/*.md` paths anywhere in advisor\n- [ ] Advisor has a \"Cross-domain playbooks\" section with 5-10 bullets naming skills only (no reference file paths)\n- [ ] Cross-domain routing recipes from old Routing Logic preserved in playbooks section\n- [ ] No \"Covers\" filler in advisor description\n- [ ] OOS bullet has `[skill:]` attribution (zero validator warnings)\n- [ ] `similarity-baseline.json` regenerated via `validate-similarity.py` workflow and committed\n- [ ] `./scripts/validate-skills.sh` passes with zero warnings\n- [ ] `./scripts/validate-marketplace.sh` passes\n- [ ] `python3 scripts/validate-similarity.py` passes\n\n## Done summary\nSlimmed the advisor skill from 239 to 98 lines: removed 127-line Routing Logic section, replaced verbose Skill Catalog with lean 8-row table, added 9-bullet Cross-Domain Playbooks section preserving multi-skill routing recipes, fixed OOS attribution warning, and eliminated all references/*.md paths from the advisor. Similarity baseline verified correct (empty pairs, max score 0.0).\n## Evidence\n- Commits: 38b418a, 178ea42\n- Tests: ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh, python3 scripts/validate-similarity.py --repo-root . --baseline scripts/similarity-baseline.json --suppressions scripts/similarity-suppressions.json\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-27T05:27:07.047649Z",
        "depends_on": [
          "fn-65-skill-quality-fine-tuning-eliminate.1",
          "fn-65-skill-quality-fine-tuning-eliminate.2",
          "fn-65-skill-quality-fine-tuning-eliminate.3"
        ],
        "epic": "fn-65-skill-quality-fine-tuning-eliminate",
        "id": "fn-65-skill-quality-fine-tuning-eliminate.4",
        "priority": null,
        "spec_path": ".flow/tasks/fn-65-skill-quality-fine-tuning-eliminate.4.md",
        "status": "todo",
        "title": "Update docs and extend validator for reference file checks",
        "updated_at": "2026-02-27T05:38:06.557770Z"
      },
      "id": "fn-65-skill-quality-fine-tuning-eliminate.4",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-27T07:30:37.127413Z",
        "evidence": {
          "commits": [
            "5cb0f3bb99bc2e8b3a43576dedf55f936463b208"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-27T07:41:36.910471Z"
      },
      "spec": "# fn-65-skill-quality-fine-tuning-eliminate.4 Update docs and extend validator for reference file checks\n\n## Description\nUpdate stale documentation and extend the validator to check reference files, encoding the new conventions from Tasks 1-3.\n\n**Size:** M\n**Files:** `CONTRIBUTING-SKILLS.md`, `docs/skill-routing-style-guide.md`, `scripts/_validate_skills.py`\n\n## Approach\n\n### 1. Fix CONTRIBUTING-SKILLS.md\n\nReplace all `details.md` references with the `references/` multi-file pattern:\n\n- **Lines 60-68** (folder structure diagram): Change `details.md` to `references/` directory with 2-3 example files.\n- **Line 105**: Change \"extract it into a `details.md` file\" to \"extract it into files under `references/`\".\n- **Line 108**: Change the `details.md` example to a `references/` example.\n- **Lines 262, 289**: Update progressive disclosure layers and size limit sections from `details.md` to `references/`.\n- **Line 111** already mentions `references/` correctly \u2014 ensure surrounding text is consistent.\n\n### 2. Fix style guide\n\n- **Line 3**: Remove stale \"T5--T10 sweep tasks\" reference. Just state this is the canonical reference.\n- **Line 134**: Replace `dotnet-version-detection` (deleted skill) in cycle detection example with a current skill name (e.g., `dotnet-tooling`).\n- **Lines 236-251**: Replace the invocation contract positive example (drawn from deleted `dotnet-version-detection`) with an example from a current 8-skill name (use `dotnet-csharp` or `dotnet-tooling`).\n- **Line 277**: Update \"130+ skills\" rollout language to \"8 skills\".\n- **Add a new section** on the `references/` companion file convention: when to use, naming convention (human-readable Title Case), no Scope/OOS required, progressive disclosure role.\n- **Add explicit documentation** that `[skill:]` syntax is used for both skills and agents. The `<id>` must match either a skill directory name or an agent file stem. This clarifies the existing convention.\n\n### 3. Extend validator for reference files\n\nAdd checks to `scripts/_validate_skills.py` for files matching `skills/*/references/*.md`:\n\n- **Title check (fence-aware)**: Every reference file must have an H1 title (`# ...`). The validator must scan for the first H1 outside code fences (between ``` markers), not just the first line. Title must NOT start with `# dotnet-` (slug-style). **Note:** The existing `extract_refs()` function is NOT fence-aware \u2014 write a new fence-aware reference extractor for reference files rather than modifying the existing SKILL/agent validation behavior.\n\n- **No Scope/OOS**: Reference files must NOT have `## Scope` or `## Out of scope` headings.\n\n- **Stale cross-ref check (fence-aware)**: Write a new fence-aware `[skill:X]` extractor that skips content inside code fences. Any `[skill:X]` reference outside code fences must resolve against `known_ids` (the union of skill directory names and agent file stems, same set used for SKILL.md validation). Report unresolved refs as ERRORs. This is a **new function** \u2014 do not modify the existing `extract_refs()` to avoid changing SKILL/agent validation outputs.\n\n- **Stale cross-ref severity**: Reference files are always strict \u2014 unresolved `[skill:]` refs are ERRORs regardless of `--allow-planned-refs`. This is intentional: reference files should never contain planned/future skill names.\n\n- **Routing table file existence**: For each SKILL.md that contains a `## Routing Table` section (the 7 domain skills), parse it and validate companion-file existence. Skip skills without that section (the advisor has no routing table). Locate the `Companion File` column by matching the table header row by column name (not by position index). For each file path in that column, verify the file exists on disk. Report missing files as ERRORs.\n\n**Architecture notes:**\n- Reuse the existing `known_ids` set (skills + agents) for cross-ref resolution. Do NOT create a separate \"reference-only\" allowlist.\n- Add reference checks as a new function called from the main validation loop, respecting the existing WARN/FAIL severity model.\n- The fence-aware extractor should track whether the current line is inside a code fence (between ``` markers) and skip `[skill:]` extraction and H1 detection for fenced lines.\n\n## Key context\n\n- The validator currently processes only `SKILL.md` and agent files. Reference files are invisible to it.\n- The existing filler-phrase detection (line 94-100) and invocation contract checks are good patterns to follow for new reference file checks.\n- The valid `known_ids` for cross-ref resolution are constructed from skill directory names + agent file stems. This is already computed in the validator.\n- CONTRIBUTING-SKILLS.md is 480 lines. The `details.md` pattern appears in 5 locations. Replace all consistently.\n- Task 4 lands LAST after Tasks 1-3 so the validator encodes the final conventions.\n\n## Acceptance\n- [ ] CONTRIBUTING-SKILLS.md has zero references to `details.md`\n- [ ] CONTRIBUTING-SKILLS.md folder structure shows `references/` directory pattern\n- [ ] Style guide positive example uses a current 8-skill name (not `dotnet-version-detection`)\n- [ ] Style guide has no \"T5--T10\" references\n- [ ] Style guide says \"8 skills\" not \"130+ skills\" in rollout section\n- [ ] Style guide has a new section documenting the `references/` companion file convention\n- [ ] Style guide explicitly documents that `[skill:]` is used for both skills and agents\n- [ ] Validator title check is fence-aware (finds first H1 outside code fences)\n- [ ] Validator stale cross-ref check is fence-aware (skips refs inside code fences)\n- [ ] Validator uses `known_ids` (skills + agents) for reference file cross-ref resolution\n- [ ] Validator routing table check parses `Companion File` column by header name, not position\n- [ ] `./scripts/validate-skills.sh` passes (including new reference checks)\n- [ ] `./scripts/validate-marketplace.sh` passes\n- [ ] Running validator against a reference file with stale `[skill:dotnet-minimal-apis]` ref outside a code fence reports an error\n- [ ] Running validator against a reference file with `[skill:dotnet-minimal-apis]` inside a code fence does NOT report an error\n\n## Done summary\nUpdated CONTRIBUTING-SKILLS.md to replace all details.md references with references/ pattern, fixed stale references in the style guide (removed T5--T10, dotnet-version-detection, 130+ skills), added new sections for references/ companion file convention and [skill:] syntax for skills and agents, and extended the validator with fence-aware H1 title checks, fence-aware cross-ref resolution, no-Scope/OOS enforcement, and routing table companion file existence checks for reference files.\n## Evidence\n- Commits: 5cb0f3bb99bc2e8b3a43576dedf55f936463b208\n- Tests: ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh\n- PRs:"
    }
  ]
}
