{
  "created_at": "2026-02-17T03:43:58.571236Z",
  "epic": {
    "data": {
      "branch_name": "fn-44-add-native-interop-and-pinvoke-skill",
      "completion_review_status": "unknown",
      "completion_reviewed_at": null,
      "created_at": "2026-02-17T03:38:54.119516Z",
      "default_impl": null,
      "default_review": null,
      "default_sync": null,
      "depends_on_epics": [],
      "id": "fn-44-add-native-interop-and-pinvoke-skill",
      "next_task": 1,
      "plan_review_status": "unknown",
      "plan_reviewed_at": null,
      "spec_path": ".flow/specs/fn-44-add-native-interop-and-pinvoke-skill.md",
      "status": "open",
      "title": "Add Native Interop and P/Invoke Skill",
      "updated_at": "2026-02-17T03:39:50.638274Z"
    },
    "spec": "# fn-44 Add Native Interop and P/Invoke Skill\n\n## Overview\n\nAdd a new `dotnet-native-interop` skill covering P/Invoke patterns across all major .NET platforms (Windows, macOS, Linux, iOS, Android, WASM). Covers `[LibraryImport]` (preferred, .NET 7+) vs `[DllImport]` (legacy), cross-platform library loading, marshalling, and platform-specific considerations.\n\n## Scope\n\n**In:** SKILL.md for `dotnet-native-interop` under `skills/core-csharp/`, plugin.json registration, advisor routing, cross-references to `dotnet-native-aot`.\n\n**Out:** COM interop (Windows legacy, future epic if needed). CsWin32 stays in `dotnet-winui`. JNI bridge for Android Java interop (different from P/Invoke).\n\n**Scope boundary with `dotnet-native-aot`**: AOT skill keeps its P/Invoke section (lines 181-226) focused on AOT-specific concerns (trimming, direct pinvoke). New skill owns the general P/Invoke guidance and cross-references AOT skill for publish scenarios.\n\n## Key Context\n\n- `[LibraryImport]` is source-generated, AOT-compatible, preferred for new code (.NET 7+)\n- `[DllImport]` still works but not AOT-compatible without manual work\n- iOS requires static linking (no dynamic library loading)\n- WASM has no traditional P/Invoke \u2014 uses `[JSImport]`/`[JSExport]` instead\n- `NativeLibrary.SetDllImportResolver` for cross-platform library name resolution\n- Struct layout (`[StructLayout]`, blittability) critical for correct marshalling\n- Function pointer callbacks (`delegate* unmanaged`) vs managed delegates\n\n## Quick commands\n\n```bash\n./scripts/validate-skills.sh\n```\n\n## Acceptance\n\n- [ ] `skills/core-csharp/dotnet-native-interop/SKILL.md` exists with valid frontmatter\n- [ ] Covers LibraryImport vs DllImport decision guidance\n- [ ] Covers platform-specific concerns: Windows DLL, macOS/Linux .so/.dylib, iOS static linking, WASM limitations\n- [ ] Covers marshalling patterns (structs, strings, callbacks)\n- [ ] Covers NativeLibrary.SetDllImportResolver for cross-platform resolution\n- [ ] Description under 120 characters\n- [ ] Registered in plugin.json\n- [ ] `dotnet-advisor` routing updated\n- [ ] Cross-references to/from `dotnet-native-aot`, `dotnet-aot-architecture`\n- [ ] All validation scripts pass\n\n## References\n\n- https://learn.microsoft.com/en-us/dotnet/standard/native-interop/pinvoke\n- https://learn.microsoft.com/en-us/dotnet/standard/native-interop/best-practices\n- `skills/native-aot/dotnet-native-aot/SKILL.md:181-226` (AOT P/Invoke section)\n- `skills/native-aot/dotnet-aot-architecture/SKILL.md:32` (LibraryImport mention)\n- `skills/ui-frameworks/dotnet-winui/SKILL.md:451` (CsWin32 reference)\n"
  },
  "epic_id": "fn-44-add-native-interop-and-pinvoke-skill",
  "schema_version": 2,
  "tasks": [
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-17T03:41:25.059985Z",
        "depends_on": [],
        "epic": "fn-44-add-native-interop-and-pinvoke-skill",
        "id": "fn-44-add-native-interop-and-pinvoke-skill.1",
        "priority": null,
        "spec_path": ".flow/tasks/fn-44-add-native-interop-and-pinvoke-skill.1.md",
        "status": "todo",
        "title": "Author dotnet-native-interop SKILL.md",
        "updated_at": "2026-02-17T03:42:05.736102Z"
      },
      "id": "fn-44-add-native-interop-and-pinvoke-skill.1",
      "runtime": null,
      "spec": "# fn-44-add-native-interop-and-pinvoke-skill.1 Author dotnet-native-interop SKILL.md\n\n## Description\nAuthor `skills/core-csharp/dotnet-native-interop/SKILL.md` covering P/Invoke and native interop across Windows, macOS, Linux, iOS, Android, and WASM.\n\n**Size:** M\n**Files:** `skills/core-csharp/dotnet-native-interop/SKILL.md`\n\n## Approach\n\n- Follow existing skill pattern at `skills/native-aot/dotnet-native-aot/SKILL.md` for style\n- Cover `[LibraryImport]` (.NET 7+, preferred) vs `[DllImport]` (legacy)\n- Platform sections: Windows DLL, macOS/Linux .so/.dylib, iOS static linking, WASM `[JSImport]` note\n- Cover marshalling: structs, strings, function pointers, `NativeLibrary.SetDllImportResolver`\n- Reference: https://learn.microsoft.com/en-us/dotnet/standard/native-interop/pinvoke\n\n## Key context\n\n- iOS does not allow dynamic library loading \u2014 must use static linking\n- WASM has no traditional P/Invoke \u2014 uses `[JSImport]`/`[JSExport]` instead (mention, cross-ref)\n- `dotnet-native-aot` lines 181-226 keep AOT-specific P/Invoke; this skill owns general guidance\n- `CsWin32` stays in `dotnet-winui` \u2014 just add a cross-reference\n## Acceptance\n- [ ] SKILL.md exists at `skills/core-csharp/dotnet-native-interop/`\n- [ ] Valid frontmatter with `name` and `description` (under 120 chars)\n- [ ] Covers LibraryImport vs DllImport with decision guidance\n- [ ] Platform-specific sections for Windows, macOS/Linux, iOS, Android, WASM\n- [ ] Covers marshalling patterns (structs, strings, callbacks)\n- [ ] Covers NativeLibrary.SetDllImportResolver\n- [ ] Cross-reference syntax used for related skills\n## Done summary\nTBD\n\n## Evidence\n- Commits:\n- Tests:\n- PRs:\n"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-17T03:41:25.164729Z",
        "depends_on": [
          "fn-44-add-native-interop-and-pinvoke-skill.1"
        ],
        "epic": "fn-44-add-native-interop-and-pinvoke-skill",
        "id": "fn-44-add-native-interop-and-pinvoke-skill.2",
        "priority": null,
        "spec_path": ".flow/tasks/fn-44-add-native-interop-and-pinvoke-skill.2.md",
        "status": "todo",
        "title": "Integrate dotnet-native-interop into plugin registry and routing",
        "updated_at": "2026-02-17T03:42:10.114448Z"
      },
      "id": "fn-44-add-native-interop-and-pinvoke-skill.2",
      "runtime": null,
      "spec": "# fn-44-add-native-interop-and-pinvoke-skill.2 Integrate dotnet-native-interop into plugin registry and routing\n\n## Description\nRegister `dotnet-native-interop` in plugin.json, add routing entry in `dotnet-advisor`, and add cross-references to/from `dotnet-native-aot`, `dotnet-aot-architecture`, and `dotnet-winui`.\n\n**Size:** S\n**Files:** `.claude-plugin/plugin.json`, `skills/foundation/dotnet-advisor/SKILL.md`, `skills/native-aot/dotnet-native-aot/SKILL.md`, `skills/native-aot/dotnet-aot-architecture/SKILL.md`, `skills/ui-frameworks/dotnet-winui/SKILL.md`\n\n## Approach\n\n- Add skill path to plugin.json `skills` array\n- Add routing entry in `dotnet-advisor`\n- Add `[skill:dotnet-native-interop]` cross-references in AOT skills and WinUI (CsWin32 reference)\n- Update `--projected-skills` count in validation\n## Acceptance\n- [ ] plugin.json includes `skills/core-csharp/dotnet-native-interop`\n- [ ] `dotnet-advisor` has routing entry for native interop\n- [ ] Cross-references added in `dotnet-native-aot`, `dotnet-aot-architecture`, `dotnet-winui`\n- [ ] All four validation scripts pass\n## Done summary\nTBD\n\n## Evidence\n- Commits:\n- Tests:\n- PRs:\n"
    }
  ]
}
