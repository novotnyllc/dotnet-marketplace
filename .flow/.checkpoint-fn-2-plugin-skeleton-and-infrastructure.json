{
  "created_at": "2026-02-12T02:54:58.015055Z",
  "epic": {
    "data": {
      "branch_name": "fn-2-plugin-skeleton-and-infrastructure",
      "completion_review_status": "unknown",
      "completion_reviewed_at": null,
      "created_at": "2026-02-11T22:23:11.430274Z",
      "default_impl": null,
      "default_review": null,
      "default_sync": null,
      "depends_on_epics": [],
      "id": "fn-2-plugin-skeleton-and-infrastructure",
      "next_task": 1,
      "plan_review_status": "ship",
      "plan_reviewed_at": "2026-02-11T23:22:32.032918Z",
      "spec_path": ".flow/specs/fn-2-plugin-skeleton-and-infrastructure.md",
      "status": "open",
      "title": "Plugin Skeleton and Infrastructure",
      "updated_at": "2026-02-11T23:22:32.033070Z"
    },
    "spec": "# Plugin Skeleton and Infrastructure\n\n## Overview\n\nCreate the foundational plugin structure for dotnet-artisan. This is the Wave 0 epic that blocks ALL other work. It establishes the plugin.json manifest, directory layout, router/advisor skill, version detection skill, project analysis skill, and validation infrastructure.\n\n**Spec reference:** `docs/dotnet-artisan-spec.md` sections: Core Design Principles, Plugin Architecture, Foundation & Plugin Infrastructure\n\n## Scope\n\n**In scope:**\n- `.claude-plugin/plugin.json` and `marketplace.json` manifests\n- Directory structure: `skills/`, `agents/`, `hooks/`, `scripts/`\n- `dotnet-advisor` router/index skill (compressed catalog, progressive disclosure)\n- `dotnet-version-detection` skill (read TFMs, SDK versions, detect preview features)\n- `dotnet-project-analysis` skill (solution structure, project refs, CPM)\n- `plugin-self-publish` skill (plugin versioning, changelog, CI/CD)\n- Validation scripts for SKILL.md frontmatter and cross-references\n- Basic CI workflow skeleton (validate on push)\n\n**Out of scope:**\n- Actual .NET domain skills (Wave 1+)\n- Hooks system (fn-23)\n- MCP integration (fn-23)\n- Cross-agent build pipeline (fn-24)\n- README/CONTRIBUTING (fn-25)\n\n## Approach\n\n### Plugin Structure (validated via `/plugin-dev:plugin-structure`)\n\n```\ndotnet-artisan/\n  .claude-plugin/\n    plugin.json          # name, version, skills[], agents[], hooks\n    marketplace.json     # marketplace metadata\n  skills/\n    foundation/\n      dotnet-advisor/SKILL.md\n      dotnet-version-detection/SKILL.md\n      dotnet-project-analysis/SKILL.md\n      plugin-self-publish/SKILL.md\n    # Wave 1+ skills go in category dirs: core-csharp/, architecture/, etc.\n  agents/\n    dotnet-architect.md\n  hooks/\n    hooks.json           # Empty initially, populated by fn-23\n  scripts/\n    validate-skills.sh   # Frontmatter + cross-ref validation\n    validate-marketplace.sh  # Plugin/marketplace JSON validation\n  .mcp.json              # Empty initially, populated by fn-23\n```\n\n### Canonical plugin.json Schema\n\n```json\n{\n  \"name\": \"dotnet-artisan\",\n  \"version\": \"0.1.0\",\n  \"description\": \"...\",\n  \"skills\": [\"skills/foundation/dotnet-advisor\", \"skills/foundation/dotnet-version-detection\", ...],\n  \"agents\": [\"agents/dotnet-architect.md\"],\n  \"hooks\": \"hooks/hooks.json\",\n  \"mcpServers\": \".mcp.json\"\n}\n```\n\n- `skills`: array of directory paths (each must contain `SKILL.md`)\n- `agents`: array of file paths (each `.md` file with agent frontmatter)\n- `hooks`: string path to hooks.json file\n- `mcpServers`: string path to .mcp.json file\n\n### Required SKILL.md Frontmatter (canonical set)\n\nAll SKILL.md files MUST have these frontmatter fields:\n- `name` (string, required): skill identifier matching directory name\n- `description` (string, required): trigger phrase, WHEN + WHEN NOT pattern\n\nOptional frontmatter fields:\n- `disable-model-invocation` (boolean): for side-effect-only skills\n- `user-invocable` (boolean): whether user can invoke directly\n\nThis is the single source of truth for validation. `validate-skills.sh` enforces exactly these required fields.\n\n### Cross-Reference Syntax\n\nSkills cross-referencing other skills MUST use the format: `[skill:skill-name]` (e.g., `[skill:dotnet-version-detection]`). The `validate-skills.sh` script validates only this machine-parseable syntax.\n\n### Context Budget Architecture\n\n**Critical constraint:** Combined skill descriptions must stay under ~15,000 characters.\n\nStrategy:\n- Router skill (`dotnet-advisor`) gets a compressed catalog: ~50 chars per skill, organized by category\n- Each skill description is a precise trigger phrase (WHEN + WHEN NOT pattern, ~120 chars)\n- MCP Tool Search auto-activates when >10% context consumed (handles 80+ skills gracefully)\n- Prototype and validate budget math in task fn-2.2\n\n**Budget validation thresholds** (coherent across all files):\n- `PROJECTED_SKILLS_COUNT`: 100 (derived from spec catalog, buffered up from ~95 after adding data access + container skills)\n- `MAX_DESC_CHARS`: 120 (aggressive target per description, enforces compression)\n- Projected max: 100 x 120 = 12,000 chars\n- **WARN** at 12,000 chars (current or projected)\n- **FAIL** at 15,000 chars (hard platform limit)\n- Target: keep current combined descriptions under 12,000 chars (at budget ceiling \u2014 some descriptions must be <120 chars to stay within budget)\n\n`validate-skills.sh` outputs stable keys for CI parsing:\n```\nCURRENT_DESC_CHARS=<N>\nPROJECTED_DESC_CHARS=<N>\nBUDGET_STATUS=OK|WARN|FAIL\n```\n\n### Router/Advisor Skill Design\n\nThe `dotnet-advisor` skill is always loaded. Its description triggers on ANY .NET-related query. Its body contains:\n- Compressed catalog of ALL 19 planned categories as stubs (each with `implemented` or `planned` status)\n- Decision logic: \"if user is doing X, load skills Y and Z\"\n- Version detection trigger: \"first, check what .NET version the project uses\"\n- Cross-references to specialist skills using `[skill:name]` syntax\n\n### Version Detection Design\n\nThe `dotnet-version-detection` skill:\n- Reads `.csproj` TargetFramework/TargetFrameworks\n- Reads `global.json` for SDK version\n- Reads `Directory.Build.props` for shared TFM settings\n- Detects `<LangVersion>preview</LangVersion>` for preview features\n- Detects `<EnablePreviewFeatures>true</EnablePreviewFeatures>` for .NET 11 features\n- Outputs structured guidance: \"This project targets net10.0 with C# 14. Use modern patterns.\"\n- Multi-targeting: reports all TFMs, recommends highest for guidance, notes polyfill needs\n\n**Precedence algorithm for TFM resolution:**\n1. Direct `<TargetFramework>` value in .csproj (highest priority)\n2. `<TargetFrameworks>` (semicolon-delimited) -- report all, guide on highest\n3. `Directory.Build.props` shared TFM (if no per-project override)\n4. MSBuild property expressions (e.g., `$(SomeTfm)`) -- emit \"unresolved property\" warning, fall back to `global.json` SDK version\n5. `dotnet --version` as last resort\n\n**Version-specific feature catalog:** Stored as a dated reference data section within SKILL.md (not inline detection logic). Tagged with `Last updated: YYYY-MM-DD` for staleness tracking. The skill detects versions; the data section maps versions to features.\n\n## Risks\n\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| Context budget math fails | Router cannot function, whole architecture breaks | Projected budget validation (warn at 12k, fail at 15k), prototype in fn-2.2 |\n| Plugin structure mismatch | Skills do not auto-discover | Use `/plugin-dev:plugin-structure` to validate |\n| Description triggers too generic | Wrong skills load | Use `/plugin-dev:skill-reviewer` on each skill |\n| Version detection edge cases (MSBuild property indirection) | Wrong .NET guidance | Precedence algorithm + unresolved property warnings |\n| Cross-reference format not parseable | Validation misses broken refs | Canonical `[skill:name]` syntax, validated in CI |\n\n## Non-functional targets\n\n- Plugin loads in <2s\n- Router skill description <500 chars\n- Individual skill descriptions target <120 chars (enforced by projected budget math)\n- Combined all-skill descriptions target <12,000 chars (warn), hard fail at 15,000 chars\n- Validation scripts run in <5s (single-pass scan, no subprocess spawning, no network)\n- Validation scripts output stable keys: CURRENT_DESC_CHARS, PROJECTED_DESC_CHARS, BUDGET_STATUS\n- CI validation workflow runs in <2 min\n\n## Quick commands\n\n```bash\n# Validate plugin structure\njq empty .claude-plugin/plugin.json\n\n# Run skill validation (used both locally and in CI)\n./scripts/validate-skills.sh\n\n# Run marketplace validation\n./scripts/validate-marketplace.sh\n\n# Run all validation (same as CI)\n./scripts/validate-skills.sh && ./scripts/validate-marketplace.sh\n\n# Test locally by symlinking plugin\nln -sf $(pwd) ~/.claude/plugins/dotnet-artisan\n```\n\n## Acceptance\n\n- [ ] `.claude-plugin/plugin.json` validates against canonical schema (skills=array of paths, agents=array of paths, hooks=string path, mcpServers=string path)\n- [ ] `marketplace.json` has correct metadata (name, author, version, description)\n- [ ] `dotnet-advisor` skill triggers on .NET-related queries and routes to all 19 categories (implemented/planned stubs)\n- [ ] `dotnet-version-detection` skill correctly reads TFMs with defined precedence algorithm\n- [ ] `dotnet-project-analysis` skill understands solution structure, uses canonical frontmatter and `[skill:name]` cross-refs\n- [ ] Combined skill descriptions under 12,000 characters (warn), hard fail at 15,000\n- [ ] Projected budget: 100 skills x 120 chars = 12,000 (at warn threshold \u2014 validates descriptions average \u2264120 chars)\n- [ ] Validation script catches malformed SKILL.md frontmatter (canonical required fields: name, description)\n- [ ] Validation script validates `[skill:name]` cross-references\n- [ ] Validation script outputs stable keys: CURRENT_DESC_CHARS, PROJECTED_DESC_CHARS, BUDGET_STATUS\n- [ ] CI workflow runs exact same validation commands as local scripts\n- [ ] Directory structure matches Claude Code plugin conventions\n- [ ] All SKILL.md files have required frontmatter (name, description)\n"
  },
  "epic_id": "fn-2-plugin-skeleton-and-infrastructure",
  "schema_version": 2,
  "tasks": [
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-11T22:24:44.663478Z",
        "depends_on": [],
        "epic": "fn-2-plugin-skeleton-and-infrastructure",
        "id": "fn-2-plugin-skeleton-and-infrastructure.1",
        "priority": null,
        "spec_path": ".flow/tasks/fn-2-plugin-skeleton-and-infrastructure.1.md",
        "status": "todo",
        "title": "Create plugin.json manifest and directory structure",
        "updated_at": "2026-02-11T22:43:01.203509Z"
      },
      "id": "fn-2-plugin-skeleton-and-infrastructure.1",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-12T01:01:17.005445Z",
        "evidence": {
          "commits": [
            "4f7648fba0e9a3ad3b3c4e8d8df0f94f8b1f5a5c",
            "0bb6afe8371e368a6f9d9aa0a86b8546380f49c6"
          ],
          "prs": [],
          "tests": [
            "jq empty .claude-plugin/plugin.json",
            "jq empty .claude-plugin/marketplace.json",
            "jq empty hooks/hooks.json",
            "jq empty .mcp.json"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-12T01:09:17.225628Z"
      },
      "spec": "## Description\nCreate the foundational plugin directory structure and manifests for dotnet-artisan following Claude Code plugin conventions. This task creates minimal placeholder SKILL.md files so the structure passes validation.\n\n**Size:** M\n**Files:**\n- `.claude-plugin/plugin.json`\n- `.claude-plugin/marketplace.json`\n- `skills/foundation/dotnet-advisor/SKILL.md` (placeholder with valid frontmatter)\n- `skills/foundation/dotnet-version-detection/SKILL.md` (placeholder)\n- `skills/foundation/dotnet-project-analysis/SKILL.md` (placeholder)\n- `skills/foundation/plugin-self-publish/SKILL.md` (placeholder)\n- `agents/dotnet-architect.md` (placeholder with valid agent frontmatter)\n- `hooks/hooks.json` (empty hooks structure)\n- `.mcp.json` (empty MCP structure)\n- `scripts/` (empty dir)\n\n## Approach\n\n1. Use `/plugin-dev:plugin-structure` skill FIRST to understand correct plugin conventions\n2. Create `.claude-plugin/plugin.json` following this exact schema:\n   ```json\n   {\n     \"name\": \"dotnet-artisan\",\n     \"version\": \"0.1.0\",\n     \"description\": \"Comprehensive .NET development skills for modern C#, ASP.NET, MAUI, Blazor, and cloud-native applications\",\n     \"skills\": [\n       \"skills/foundation/dotnet-advisor\",\n       \"skills/foundation/dotnet-version-detection\",\n       \"skills/foundation/dotnet-project-analysis\",\n       \"skills/foundation/plugin-self-publish\"\n     ],\n     \"agents\": [\"agents/dotnet-architect.md\"],\n     \"hooks\": \"hooks/hooks.json\",\n     \"mcpServers\": \".mcp.json\"\n   }\n   ```\n   - `skills`: array of directory paths (each must contain `SKILL.md`)\n   - `agents`: array of file paths (each `.md` with agent frontmatter)\n   - `hooks`: string path to hooks.json\n   - `mcpServers`: string path to .mcp.json\n3. Create `marketplace.json` with marketplace metadata\n4. Create placeholder SKILL.md files with valid frontmatter (name, description) so structure validates\n5. Create placeholder agent file with valid agent frontmatter\n6. Create category directories under `skills/` per spec (foundation/, core-csharp/, architecture/, etc.)\n7. Create empty placeholder structures for hooks and MCP (populated in fn-23)\n\n## Key context\n\n- Follow Aaronontheweb/dotnet-skills plugin.json format as reference\n- Plugin components must be at plugin root, NOT inside `.claude-plugin/`\n- Use `${CLAUDE_PLUGIN_ROOT}` for all plugin-relative paths in hooks/MCP configs\n- License: MIT, Author: Claire Novotny LLC\n- Required SKILL.md frontmatter: `name` (string), `description` (string). See epic spec for canonical set.\n- Placeholder SKILL.md files must have valid frontmatter but can have minimal body content (e.g., \"Implementation in fn-2.X\")\n- Placeholder agent file must have valid frontmatter (name, description, tools)\n\n## Acceptance\n- [ ] `.claude-plugin/plugin.json` validates against canonical schema (skills=array of dir paths, agents=array of file paths, hooks=string path, mcpServers=string path)\n- [ ] `.claude-plugin/marketplace.json` has correct metadata\n- [ ] `skills/` directory has category subdirectories matching spec categories\n- [ ] `agents/` directory exists with placeholder dotnet-architect.md\n- [ ] `hooks/hooks.json` is valid empty hooks structure\n- [ ] `.mcp.json` is valid empty MCP configuration\n- [ ] All placeholder SKILL.md files have valid frontmatter (name, description)\n- [ ] `/plugin-dev:plugin-validator` passes on the complete structure (placeholders make this possible)\n- [ ] Plugin can be symlinked to `~/.claude/plugins/dotnet-artisan` for local testing\n\n## Done summary\nCreated dotnet-artisan plugin skeleton: plugin.json manifest with canonical schema, marketplace.json metadata, 4 placeholder SKILL.md files with valid frontmatter, dotnet-architect agent placeholder, empty hooks/MCP structures, and 21 skill category directories matching spec categories.\n## Evidence\n- Commits: 4f7648fba0e9a3ad3b3c4e8d8df0f94f8b1f5a5c, 0bb6afe8371e368a6f9d9aa0a86b8546380f49c6\n- Tests: jq empty .claude-plugin/plugin.json, jq empty .claude-plugin/marketplace.json, jq empty hooks/hooks.json, jq empty .mcp.json\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-11T22:24:44.781500Z",
        "depends_on": [
          "fn-2-plugin-skeleton-and-infrastructure.1"
        ],
        "epic": "fn-2-plugin-skeleton-and-infrastructure",
        "id": "fn-2-plugin-skeleton-and-infrastructure.2",
        "priority": null,
        "spec_path": ".flow/tasks/fn-2-plugin-skeleton-and-infrastructure.2.md",
        "status": "todo",
        "title": "Create dotnet-advisor router skill with compressed catalog",
        "updated_at": "2026-02-11T23:20:38.812095Z"
      },
      "id": "fn-2-plugin-skeleton-and-infrastructure.2",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-12T01:14:21.305567Z",
        "evidence": {
          "commits": [
            "e4b7ac13f3b0a79e9f1d67bb24c738dab3bc349f"
          ],
          "prs": [],
          "tests": [
            "python3 validation of frontmatter, description length, cross-ref syntax, category count, budget math"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-12T01:24:28.813400Z"
      },
      "spec": "## Description\nCreate the `dotnet-advisor` router/index skill that serves as the always-loaded entry point for the plugin. This skill must contain a compressed catalog of ALL 19 planned skill categories (with implemented/planned status markers) and route agents to the right specialist skills based on context.\n\n**Size:** M\n**Files:**\n- `skills/foundation/dotnet-advisor/SKILL.md`\n\n## Approach\n\n1. Use `/plugin-dev:skill-development` to understand SKILL.md frontmatter requirements\n2. Write frontmatter with required fields: `name`, `description` (canonical set from epic)\n3. Write precise trigger description: triggers on ANY .NET development query\n4. Use WHEN + WHEN NOT pattern in description for reliable auto-triggering\n5. Body contains compressed skill catalog with ALL 19 categories as explicit stubs:\n   - Each category has status marker: `implemented` or `planned`\n   - ~50 chars per skill entry\n   - Foundation skills marked as `implemented`, Wave 1-3 skills marked as `planned`\n6. Routing logic: \"if doing X, load skills Y and Z\" for each major scenario\n7. Include version detection trigger: \"first, check what .NET version via [skill:dotnet-version-detection]\"\n8. Use `[skill:name]` cross-reference syntax throughout\n9. **CRITICAL**: Validate budget thresholds:\n   - Router description: <500 chars, target <120 chars\n   - Budget constants: PROJECTED_SKILLS_COUNT=95, MAX_DESC_CHARS=120\n   - Projected max: 95 x 120 = 11,400 (under 12,000 warn threshold)\n   - WARN at 12,000, FAIL at 15,000\n\n## Key context\n\n- Combined all-skill descriptions: WARN at 12,000 chars, FAIL at 15,000 (hard platform limit)\n- Router description should be <500 chars but highly specific to .NET triggers\n- Router body is only loaded on invocation (progressive disclosure) so can be larger\n- All 19 categories MUST appear as stubs even if skills are not yet implemented\n- Use `[skill:skill-name]` for all cross-references (machine-parseable, validated in CI)\n- Use `/plugin-dev:skill-reviewer` to validate description triggering effectiveness\n- Required frontmatter: `name`, `description` (canonical set from epic spec)\n\n## Acceptance\n- [ ] SKILL.md has valid frontmatter (name, description)\n- [ ] Description triggers on .NET-related queries (test with: \"create API\", \"add tests\", \"fix async\")\n- [ ] Description does NOT trigger on non-.NET queries\n- [ ] Body contains compressed catalog of all 19 planned skill categories with status markers\n- [ ] Routing logic covers all 19 spec categories\n- [ ] Cross-references use `[skill:name]` syntax\n- [ ] Cross-references version detection as first step\n- [ ] Router description under 500 chars\n- [ ] Projected budget math validated: 95 x 120 = 11,400 (under 12,000 warn)\n- [ ] `/plugin-dev:skill-reviewer` rates description as effective for triggering\n\n## Done summary\nCreated the dotnet-advisor router SKILL.md with a compressed catalog of all 19 planned skill categories (100 skills total), complete routing logic decision tree, and consistent [skill:name] cross-reference syntax throughout. Description uses WHEN/WHEN NOT pattern with intent phrases for reliable auto-triggering at 257 chars (under 500 limit). Budget math validated: 95 projected x 120 chars = 11,400 (under 12,000 WARN threshold).\n## Evidence\n- Commits: e4b7ac13f3b0a79e9f1d67bb24c738dab3bc349f\n- Tests: python3 validation of frontmatter, description length, cross-ref syntax, category count, budget math\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-11T22:24:44.894683Z",
        "depends_on": [
          "fn-2-plugin-skeleton-and-infrastructure.1"
        ],
        "epic": "fn-2-plugin-skeleton-and-infrastructure",
        "id": "fn-2-plugin-skeleton-and-infrastructure.3",
        "priority": null,
        "spec_path": ".flow/tasks/fn-2-plugin-skeleton-and-infrastructure.3.md",
        "status": "todo",
        "title": "Create dotnet-version-detection skill",
        "updated_at": "2026-02-11T22:43:34.591998Z"
      },
      "id": "fn-2-plugin-skeleton-and-infrastructure.3",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-12T01:31:12.548401Z",
        "evidence": {
          "commits": [
            "d31130345d",
            "7b737165e1",
            "46208d07af"
          ],
          "prs": [],
          "tests": [
            "jq empty .claude-plugin/plugin.json"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-12T01:42:53.678525Z"
      },
      "spec": "## Description\nCreate the `dotnet-version-detection` skill that reads project files to determine the .NET version, C# language version, and preview feature state. This is a cross-cutting skill referenced by virtually all other skills. The skill focuses on detection/reporting; version-specific feature knowledge is stored as a dated reference data section.\n\n**Size:** M\n**Files:**\n- `skills/foundation/dotnet-version-detection/SKILL.md`\n\n## Approach\n\n1. Use `/plugin-dev:skill-development` for frontmatter\n2. Skill instructs agent to read and parse using this **precedence algorithm**:\n   1. Direct `<TargetFramework>` value in .csproj (highest priority)\n   2. `<TargetFrameworks>` (semicolon-delimited) -- report all, guide on highest\n   3. `Directory.Build.props` shared TFM (if no per-project override)\n   4. MSBuild property expressions (e.g., `$(SomeTfm)`) -- emit \"unresolved property: $(SomeTfm)\" warning, fall back to global.json SDK version\n   5. `dotnet --version` as last resort\n3. Additional detection:\n   - `global.json` -> `sdk.version`\n   - `<LangVersion>preview</LangVersion>` -> C# 15 features\n   - `<EnablePreviewFeatures>true</EnablePreviewFeatures>` -> .NET 11 features\n   - `<Features>$(Features);runtime-async=on</Features>` -> runtime-async\n4. Output structured version info: TFM(s), C# version, preview state, SDK version, any warnings\n5. Multi-targeting handling: report all TFMs, guide on highest, note polyfill needs for lower\n6. **Version-to-feature reference data section** (separate from detection logic):\n   - .NET version matrix (net8.0 through net11.0) with C# versions and support dates\n   - .NET 11 Preview 1 feature awareness\n   - Tagged with `Last updated: YYYY-MM-DD` for staleness tracking\n7. Edge cases:\n   - No csproj: suggest creating project\n   - MSBuild property indirection: warn \"unresolved property\", use SDK version fallback\n   - Inconsistent files: warn, prefer csproj TFM over global.json\n   - `dotnet --version` fallback when no project files exist\n\n## Key context\n\n- Reference: `docs/dotnet-artisan-spec.md` -> \"Current .NET Landscape\" and \".NET 11 Preview 1 Features\"\n- Detection runs on first .NET file encounter, caches per-project\n- Must never suggest deprecated patterns for detected version\n- Separation of concerns: detection logic vs feature catalog (feature catalog is a dated data section, not inline code)\n- Use `[skill:name]` cross-reference syntax for any references to other skills\n- Required frontmatter: `name`, `description` (canonical set from epic spec)\n\n## Acceptance\n- [ ] Skill reads TargetFramework from .csproj correctly (direct values)\n- [ ] Skill handles multi-targeting (TargetFrameworks with semicolons)\n- [ ] Skill reads global.json SDK version\n- [ ] Skill reads Directory.Build.props for shared settings\n- [ ] Skill detects preview features (LangVersion, EnablePreviewFeatures)\n- [ ] Skill emits \"unresolved property\" warning for MSBuild property expressions\n- [ ] Precedence algorithm documented and followed (csproj > Directory.Build.props > global.json > dotnet --version)\n- [ ] Version-to-feature reference data section is separate from detection logic\n- [ ] Reference data tagged with `Last updated: YYYY-MM-DD`\n- [ ] Version matrix covers net8.0 through net11.0 with C# versions\n- [ ] Edge cases handled: missing files, MSBuild indirection, inconsistent versions, no SDK\n\n## Done summary\nCreated dotnet-version-detection skill with strict TFM precedence algorithm (csproj > Directory.Build.props > global.json > dotnet --version), multi-targeting support, preview feature detection (LangVersion, EnablePreviewFeatures, runtime-async), MSBuild property expression warnings, edge case handling, and a separate version-to-feature reference data section covering net8.0 through net11.0.\n## Evidence\n- Commits: d31130345d, 7b737165e1, 46208d07af\n- Tests: jq empty .claude-plugin/plugin.json\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-11T22:24:45.012030Z",
        "depends_on": [
          "fn-2-plugin-skeleton-and-infrastructure.1"
        ],
        "epic": "fn-2-plugin-skeleton-and-infrastructure",
        "id": "fn-2-plugin-skeleton-and-infrastructure.4",
        "priority": null,
        "spec_path": ".flow/tasks/fn-2-plugin-skeleton-and-infrastructure.4.md",
        "status": "todo",
        "title": "Create dotnet-project-analysis skill",
        "updated_at": "2026-02-11T23:20:45.884568Z"
      },
      "id": "fn-2-plugin-skeleton-and-infrastructure.4",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-12T01:47:51.770202Z",
        "evidence": {
          "commits": [
            "4457ba7e5de1544411df0c0d043f4a956d1e430d"
          ],
          "prs": [],
          "tests": [
            "jq empty .claude-plugin/plugin.json"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-12T01:56:24.438972Z"
      },
      "spec": "## Description\nCreate the `dotnet-project-analysis` skill that helps agents understand .NET solution structure, project references, and build configuration.\n\n**Size:** M\n**Files:**\n- `skills/foundation/dotnet-project-analysis/SKILL.md`\n\n## Approach\n\n1. Use `/plugin-dev:skill-development` for frontmatter requirements\n2. Write frontmatter with required fields: `name`, `description` (canonical set from epic)\n3. Skill instructs agent to analyze:\n   - `.sln`/`.slnx` for solution structure and project list\n   - Project references (`<ProjectReference>`) for dependency graph\n   - `Directory.Build.props` / `Directory.Build.targets` for centralized config\n   - `Directory.Packages.props` for Central Package Management\n   - `.editorconfig` for coding style settings\n   - `nuget.config` for package sources\n4. Output: project dependency graph, shared config locations, CPM status\n5. Guide agent on navigation: \"entry point is Program.cs\", \"startup config in appsettings.json\"\n6. Detect common project types: web API, console, class lib, test, MAUI, Blazor, etc.\n7. Cross-reference version detection using `[skill:dotnet-version-detection]` syntax for TFM info\n\n## Key context\n\n- Reference dotnet-skills `project-structure` skill for conventions (.slnx, Directory.Build.props)\n- Modern .NET uses .slnx (new format) alongside .sln (legacy)\n- Central Package Management via Directory.Packages.props is the recommended approach\n- This skill is foundational - agents need to understand project layout before doing anything\n- Required frontmatter: `name`, `description` (canonical set from epic spec)\n- Cross-references MUST use `[skill:name]` syntax (machine-parseable, validated in CI)\n\n## Acceptance\n- [ ] SKILL.md has valid frontmatter (name, description)\n- [ ] Skill reads .sln and .slnx solution files\n- [ ] Skill maps project references into dependency understanding\n- [ ] Skill detects Directory.Build.props/targets centralized config\n- [ ] Skill detects Central Package Management (Directory.Packages.props)\n- [ ] Skill identifies common project types (web, console, lib, test, MAUI, Blazor)\n- [ ] Skill guides agent to entry points and config files\n- [ ] Cross-references use `[skill:dotnet-version-detection]` syntax for TFM info\n\n## Done summary\nCreated dotnet-project-analysis skill with 7-step analysis workflow covering solution discovery (.sln/.slnx), project type identification (web, console, lib, test, Blazor, MAUI, Uno), dependency graph mapping, Directory.Build.props/targets hierarchy, Central Package Management detection with hierarchical search, additional config files (editorconfig, nuget.config, dotnet-tools), and entry point guidance per project type.\n## Evidence\n- Commits: 4457ba7e5de1544411df0c0d043f4a956d1e430d\n- Tests: jq empty .claude-plugin/plugin.json\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-11T22:24:45.182312Z",
        "depends_on": [
          "fn-2-plugin-skeleton-and-infrastructure.1"
        ],
        "epic": "fn-2-plugin-skeleton-and-infrastructure",
        "id": "fn-2-plugin-skeleton-and-infrastructure.5",
        "priority": null,
        "spec_path": ".flow/tasks/fn-2-plugin-skeleton-and-infrastructure.5.md",
        "status": "todo",
        "title": "Create plugin-self-publish skill and validation scripts",
        "updated_at": "2026-02-11T23:21:01.557261Z"
      },
      "id": "fn-2-plugin-skeleton-and-infrastructure.5",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-12T02:00:18.765748Z",
        "evidence": {
          "commits": [
            "beb4058",
            "8e62327",
            "9c0e711",
            "7d64e98",
            "84f0793",
            "8e4bc00"
          ],
          "prs": [],
          "tests": [
            "ALLOW_PLANNED_REFS=1 ./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-12T02:26:21.507649Z"
      },
      "spec": "## Description\nCreate the `plugin-self-publish` skill documenting how this plugin itself is versioned and published, plus validation scripts for SKILL.md frontmatter and cross-references.\n\n**Size:** M\n**Files:**\n- `skills/foundation/plugin-self-publish/SKILL.md`\n- `scripts/validate-skills.sh`\n- `scripts/validate-marketplace.sh`\n\n## Approach\n\n1. `plugin-self-publish` skill covers:\n   - SemVer versioning strategy for the plugin\n   - CHANGELOG.md format (keep-a-changelog)\n   - GitHub Releases workflow\n   - Marketplace publishing steps\n2. `validate-skills.sh` script:\n   - Single-pass scan of all `SKILL.md` files (no subprocess spawning, no network)\n   - Checks required frontmatter: `name`, `description` (canonical set from epic, nothing more)\n   - Validates YAML frontmatter is well-formed\n   - Checks `[skill:name]` cross-references point to existing skill directories\n   - Budget validation with coherent thresholds:\n     - Constants: PROJECTED_SKILLS_COUNT=95, MAX_DESC_CHARS=120\n     - Reports current combined description char count\n     - Reports projected: 95 x 120 = 11,400\n     - WARN at 12,000 chars (current or projected)\n     - FAIL at 15,000 chars (hard platform limit)\n   - Outputs stable keys for CI parsing:\n     ```\n     CURRENT_DESC_CHARS=<N>\n     PROJECTED_DESC_CHARS=<N>\n     BUDGET_STATUS=OK|WARN|FAIL\n     ```\n   - Exits non-zero on: missing required frontmatter, broken cross-references, BUDGET_STATUS=FAIL\n3. `validate-marketplace.sh` script:\n   - Validates plugin.json against canonical schema: skills=array of dir paths, agents=array of file paths, hooks=string path, mcpServers=string path\n   - Validates marketplace.json completeness\n   - Checks all referenced skill dirs contain SKILL.md\n   - Checks all referenced agent files exist\n   - Exits non-zero on validation failures\n\n## Key context\n\n- Reference dotnet-skills `marketplace-publishing` and `validate-marketplace.sh` patterns\n- Budget validation thresholds must be coherent: WARN at 12,000, FAIL at 15,000\n- Projected: 95 x 120 = 11,400 (safely under 12,000 warn)\n- Scripts must be fast (<5s): single-pass scan, no subprocess spawning, no network\n- Use `disable-model-invocation: true` in self-publish frontmatter (side-effect command)\n- Cross-reference syntax: `[skill:skill-name]` (machine-parseable, canonical format)\n- Required frontmatter is exactly: `name`, `description`. Do not enforce optional fields.\n- Both scripts are used identically in local dev and CI (same commands)\n- Stable output keys (CURRENT_DESC_CHARS, PROJECTED_DESC_CHARS, BUDGET_STATUS) enable CI parsing\n\n## Acceptance\n- [x] plugin-self-publish skill documents versioning and publishing workflow\n- [x] validate-skills.sh checks all SKILL.md files for required frontmatter (name, description only)\n- [x] validate-skills.sh reports CURRENT_DESC_CHARS and PROJECTED_DESC_CHARS via stable output keys\n- [x] validate-skills.sh reports BUDGET_STATUS=OK|WARN|FAIL\n- [x] validate-skills.sh WARNs at 12,000 chars, FAILs at 15,000 chars\n- [x] validate-skills.sh validates `[skill:name]` cross-references against existing skill dirs\n- [x] validate-marketplace.sh validates plugin.json against canonical schema\n- [x] validate-marketplace.sh checks all referenced paths exist\n- [x] Both scripts run in <5 seconds (single-pass, no subprocesses, no network)\n- [x] Both scripts exit non-zero on FAIL conditions\n\n## Done summary\nCreated plugin-self-publish SKILL.md documenting SemVer versioning, changelog, GitHub Releases, and marketplace publishing workflow. Implemented validate-skills.sh (thin bash wrapper) and _validate_skills.py (Python validation engine) for SKILL.md frontmatter, cross-references, and context budget tracking with stable CI keys. Implemented validate-marketplace.sh for plugin.json/marketplace.json schema and path validation.\n## Evidence\n- Commits: beb4058, 8e62327, 9c0e711, 7d64e98, 84f0793, 8e4bc00\n- Tests: ALLOW_PLANNED_REFS=1 ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-11T22:24:45.323630Z",
        "depends_on": [
          "fn-2-plugin-skeleton-and-infrastructure.2",
          "fn-2-plugin-skeleton-and-infrastructure.5"
        ],
        "epic": "fn-2-plugin-skeleton-and-infrastructure",
        "id": "fn-2-plugin-skeleton-and-infrastructure.6",
        "priority": null,
        "spec_path": ".flow/tasks/fn-2-plugin-skeleton-and-infrastructure.6.md",
        "status": "todo",
        "title": "Create CI validation workflow and dotnet-architect agent",
        "updated_at": "2026-02-11T23:21:18.582763Z"
      },
      "id": "fn-2-plugin-skeleton-and-infrastructure.6",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-12T02:43:43.941051Z",
        "evidence": {
          "commits": [
            "f1b68804d8a99cd9e712f64d2e2c96c7fdc2cbad"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh",
            "jq empty .claude-plugin/plugin.json .claude-plugin/marketplace.json hooks/hooks.json .mcp.json"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-12T02:51:41.453424Z"
      },
      "spec": "## Description\nCreate the CI validation workflow (GitHub Actions) and the `dotnet-architect` agent that serves as the primary architecture advisor subagent.\n\n**Size:** M\n**Files:**\n- `.github/workflows/validate.yml`\n- `agents/dotnet-architect.md`\n\n## Approach\n\n1. `.github/workflows/validate.yml`:\n   - Triggers on push and PR to main\n   - Runs exact same commands as local validation:\n     ```\n     ./scripts/validate-skills.sh\n     ./scripts/validate-marketplace.sh\n     ```\n   - Validates JSON files via jq: `jq empty .claude-plugin/plugin.json .claude-plugin/marketplace.json hooks/hooks.json .mcp.json`\n   - Captures budget output by parsing stable keys from validate-skills.sh:\n     - CURRENT_DESC_CHARS, PROJECTED_DESC_CHARS, BUDGET_STATUS\n   - Reports budget values in workflow summary\n   - Pass/fail: workflow fails if ANY script exits non-zero\n   - Target: <2 min total runtime (lightweight, no .NET SDK needed)\n2. `dotnet-architect` agent:\n   - Description: \"Analyzes .NET project context, requirements, and constraints to recommend architecture approaches, framework choices, and design patterns\"\n   - Use `/plugin-dev:agent-development` for frontmatter format\n   - Preloads: [skill:dotnet-advisor], [skill:dotnet-version-detection], [skill:dotnet-project-analysis]\n   - Model: sonnet (focused analysis, not orchestration)\n   - Tools: Read, Glob, Grep, Bash (read-only analysis)\n\n## Key context\n\n- CI workflow is lightweight validation only (not building .NET code, no SDK install needed)\n- dotnet-architect agent is the primary advisor for planning mode\n- Agent description must trigger on architecture questions: \"what framework\", \"how to structure\", \"recommend approach\"\n- Follow Aaronontheweb/dotnet-skills agent format as reference\n- CI must run the EXACT same validation commands used locally (no separate CI-only logic)\n- CI parses stable output keys (CURRENT_DESC_CHARS, PROJECTED_DESC_CHARS, BUDGET_STATUS) for workflow summary\n- Depends on fn-2.2 (router skill exists) and fn-2.5 (validation scripts exist)\n\n## Done summary\nCreated .github/workflows/validate.yml CI workflow that runs the same validation scripts as local (validate-skills.sh, validate-marketplace.sh, jq empty on JSON files), parses budget keys into job summary, and fails on any validation error. Updated dotnet-architect agent with full frontmatter (model: sonnet), preloaded foundation skills via [skill:name] references, and analysis guidelines.\n## Evidence\n- Commits: f1b68804d8a99cd9e712f64d2e2c96c7fdc2cbad\n- Tests: ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh, jq empty .claude-plugin/plugin.json .claude-plugin/marketplace.json hooks/hooks.json .mcp.json\n- PRs:\n## Acceptance\n- [ ] GitHub Actions workflow triggers on push and PR to main\n- [ ] Workflow runs `./scripts/validate-skills.sh` and `./scripts/validate-marketplace.sh` (same as local)\n- [ ] Workflow validates JSON files via `jq empty`\n- [ ] Workflow parses and reports CURRENT_DESC_CHARS, PROJECTED_DESC_CHARS, BUDGET_STATUS in summary\n- [ ] Workflow fails on any validation error (non-zero exit)\n- [ ] Workflow completes in <2 minutes\n- [ ] dotnet-architect agent has correct frontmatter (name, description, tools, model)\n- [ ] Agent description triggers on architecture/recommendation queries\n- [ ] Agent preloads foundation skills via [skill:name] references\n- [ ] `/plugin-dev:plugin-validator` passes on complete plugin structure\n"
    }
  ]
}
