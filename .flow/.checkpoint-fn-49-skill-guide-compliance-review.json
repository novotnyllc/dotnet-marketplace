{
  "created_at": "2026-02-17T09:39:12.748536Z",
  "epic": {
    "data": {
      "branch_name": "fn-49-skill-guide-compliance-review",
      "completion_review_status": "unknown",
      "completion_reviewed_at": null,
      "created_at": "2026-02-17T03:38:59.627172Z",
      "default_impl": null,
      "default_review": null,
      "default_sync": null,
      "depends_on_epics": [],
      "id": "fn-49-skill-guide-compliance-review",
      "next_task": 1,
      "plan_review_status": "ship",
      "plan_reviewed_at": "2026-02-17T03:56:28.524721Z",
      "spec_path": ".flow/specs/fn-49-skill-guide-compliance-review.md",
      "status": "open",
      "title": "Skill Guide Compliance Review and Front Matter Optimization",
      "updated_at": "2026-02-17T04:13:57.744237Z"
    },
    "spec": "# Skill Guide Compliance Review and Front Matter Optimization\n\n## Overview\n\nAudit all 122 skill SKILL.md front matter fields for routing quality and budget compliance, then optimize descriptions to improve Claude's skill-selection accuracy while reducing the total description budget below the WARN threshold (currently 12,038 chars, WARN at 12,000).\n\nThe `description` field is Claude's **sole routing signal** \u2014 it reads all descriptions at session start and uses language understanding to choose which skill to invoke. This epic focuses on making every character count: removing filler, sharpening triggers, disambiguating overlapping skills, and ensuring keyword density serves routing.\n\n**All work ships in a single branch \u2014 no separate PRs.**\n\n## Scope\n\n**In scope:**\n- Quality audit of all 122 skill `name` and `description` front matter fields\n- Description optimization for routing effectiveness (trigger specificity, keyword density, filler removal, disambiguation)\n- Budget reduction below WARN threshold (target \u226411,800 chars to leave headroom)\n- Validation script enhancements to enforce quality standards going forward\n- Name-directory consistency check\n- Third-person voice compliance (per Anthropic best practices)\n\n**Out of scope:**\n- SKILL.md body content changes (focus is front matter only)\n- Adding new skills\n- Changes to plugin.json skill registration\n- Documentation overhaul (separate epic fn-48)\n\n## Approach\n\n1. **Build a quality rubric** covering: trigger specificity, keyword density, filler words (\"WHEN\" prefix overhead, redundant phrases), disambiguation between overlapping skills, name-directory match, third-person voice, budget contribution\n2. **Audit all 122 skills** against the rubric, categorizing issues by severity\n3. **Fix descriptions** \u2014 optimize for routing quality while staying under budget\n4. **Enhance validation** to prevent regression (name-directory match, description quality heuristics)\n\n## Quality Dimensions for Descriptions\n\n| Dimension | Good | Bad |\n|-----------|------|-----|\n| Trigger specificity | \"Write unit tests for Akka.NET actors using TestKit\" | \"Testing stuff\" |\n| Keyword density | Every word aids routing | Filler like \"helps with\", \"guide to\" |\n| Disambiguation | Distinct from all other descriptions | Overlaps with sibling skill |\n| Budget efficiency | \u2264120 chars, no wasted words | 140+ chars, redundant phrasing |\n| Third-person voice | \"Detects code smells...\" | \"I help you find...\" |\n| Name-directory match | `name: dotnet-csharp-records` in `core-csharp/dotnet-csharp-records/` | Mismatched name/path |\n\n## Quick commands\n\n```bash\n# Run skill validation (budget + structure)\n./scripts/validate-skills.sh\n\n# Check current budget\n./scripts/validate-skills.sh 2>&1 | grep CURRENT_DESC_CHARS\n\n# Run marketplace validation\n./scripts/validate-marketplace.sh\n```\n\n## Acceptance\n\n- [ ] All 122 skills audited against quality rubric with findings documented\n- [ ] Total description budget \u226411,800 chars (below WARN threshold with headroom)\n- [ ] Zero skills with descriptions >120 chars\n- [ ] All skill `name` fields match their directory path\n- [ ] No filler phrases (\"WHEN\" prefix evaluated \u2014 keep if routing value > overhead cost)\n- [ ] Overlapping skill pairs have clearly disambiguated descriptions\n- [ ] Third-person voice used consistently across all descriptions\n- [ ] `validate-skills.sh` passes with BUDGET_STATUS=OK\n- [ ] Validation script checks name-directory consistency\n- [ ] No regressions \u2014 all existing validation checks still pass\n\n## References\n\n- `CONTRIBUTING-SKILLS.md:107-148` \u2014 Description formula and budget math\n- `scripts/_validate_skills.py` \u2014 Python validator (strict YAML subset parser)\n- `scripts/validate-skills.sh` \u2014 Bash wrapper with thresholds\n- `.claude-plugin/plugin.json` \u2014 122 registered skill paths\n- `CLAUDE.md` \u2014 Plugin conventions and frontmatter rules\n- Anthropic Agent Skills Spec: name max 64 chars, description max 1024 chars\n- Description is sole routing signal \u2014 progressive disclosure: metadata \u2192 body \u2192 resources\n"
  },
  "epic_id": "fn-49-skill-guide-compliance-review",
  "schema_version": 2,
  "tasks": [
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-17T04:14:02.061093Z",
        "depends_on": [],
        "epic": "fn-49-skill-guide-compliance-review",
        "id": "fn-49-skill-guide-compliance-review.1",
        "priority": null,
        "spec_path": ".flow/tasks/fn-49-skill-guide-compliance-review.1.md",
        "status": "todo",
        "title": "Build compliance rubric and audit all 122 skill front matter",
        "updated_at": "2026-02-17T04:15:09.584189Z"
      },
      "id": "fn-49-skill-guide-compliance-review.1",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-17T08:30:11.792090Z",
        "evidence": {
          "commits": [
            "1e7fac2",
            "5017a9f"
          ],
          "prs": [],
          "tests": [
            "validate-skills.sh",
            "validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-17T08:52:59.274956Z"
      },
      "spec": "# fn-49-skill-guide-compliance-review.1 Build compliance rubric and audit all 122 skill front matter\n\n## Description\nBuild a quality rubric for skill front matter and audit all 122 skills against it. Produce a categorized findings report that Task 2 will use as the fix list.\n\n**Size:** M\n**Files:** All `skills/**/SKILL.md` (122 files, read-only), output report in task spec\n\n## Approach\n\n1. Read every `skills/**/SKILL.md` front matter block (name, description fields)\n2. Score each skill against the rubric dimensions (see below)\n3. Categorize findings by severity: critical (budget/structural), major (routing quality), minor (style)\n4. Record findings as a structured table in the task completion notes\n\n### Rubric Dimensions\n\n| # | Dimension | Check | Severity |\n|---|-----------|-------|----------|\n| 1 | Budget compliance | Description \u2264120 chars | Critical |\n| 2 | Name-directory match | `name` field matches directory path under `skills/` | Critical |\n| 3 | Extra frontmatter fields | Only `name` and `description` present (no stale fields) | Major |\n| 4 | Trigger specificity | Description contains clear activation trigger (technology + action) | Major |\n| 5 | Keyword density | No filler words (\"helps with\", \"guide to\", \"complete guide\") | Major |\n| 6 | Disambiguation | Description distinct from all sibling skills in same category | Major |\n| 7 | Third-person voice | No \"I\", \"you\", \"your\" \u2014 uses third-person (\"Detects...\", \"Configures...\") | Minor |\n| 8 | WHEN prefix evaluation | If present, does \"WHEN\" add routing value or just waste 5 chars? | Minor |\n\n### Key context\n\n- Current budget: 12,038 chars (WARN threshold 12,000, FAIL at 15,000)\n- All 122 skills currently use the \"WHEN\" prefix pattern \u2014 evaluate whether each benefits from it\n- `disable-model-invocation: true` removes a skill from budget; only `plugin-self-publish` uses it currently\n- Description is the **sole routing signal** \u2014 Claude reads all descriptions at startup and uses language understanding to pick which to invoke\n- Validator at `scripts/_validate_skills.py` already checks: frontmatter exists, name+description present, desc length >120 warning, cross-refs, budget tracking\n- Validator does NOT check: name-directory match, extra fields, WHEN pattern, body structure\n- Skill directories are organized by category under `skills/` (24 categories, 122 skills)\n- `CONTRIBUTING-SKILLS.md:107-148` documents the description formula\n## Acceptance\n- [ ] Quality rubric covers all 8 dimensions listed in the approach\n- [ ] All 122 skills audited (every `skills/**/SKILL.md` read and scored)\n- [ ] Findings categorized by severity (critical / major / minor)\n- [ ] Each finding includes: skill name, category, dimension violated, current value, suggested fix\n- [ ] Budget impact estimated (current 12,038 \u2192 target after fixes)\n- [ ] Overlapping skill pairs identified with disambiguation recommendations\n- [ ] Skills with extra frontmatter fields flagged\n- [ ] Skills with name-directory mismatches flagged\n- [ ] Report written as structured markdown in task completion notes\n## Done summary\nAudited all 127 SKILL.md front matter files against an 8-dimension quality rubric, producing a structured compliance report with 0 critical, 9 major, and 1 systemic minor finding. Key optimization: removing WHEN prefix from 126 active skills saves 630 budget chars, bringing total below WARN threshold.\n## Evidence\n- Commits: 1e7fac2, 5017a9f\n- Tests: validate-skills.sh, validate-marketplace.sh\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-17T04:14:07.297953Z",
        "depends_on": [
          "fn-49-skill-guide-compliance-review.1"
        ],
        "epic": "fn-49-skill-guide-compliance-review",
        "id": "fn-49-skill-guide-compliance-review.2",
        "priority": null,
        "spec_path": ".flow/tasks/fn-49-skill-guide-compliance-review.2.md",
        "status": "todo",
        "title": "Optimize skill descriptions for routing quality and budget compliance",
        "updated_at": "2026-02-17T04:15:10.625627Z"
      },
      "id": "fn-49-skill-guide-compliance-review.2",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-17T09:05:35.886860Z",
        "evidence": {
          "commits": [
            "f19dbd48ebcfdff2b75fb015a25dcddfb4635bdf"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-17T09:22:20.780614Z"
      },
      "spec": "# fn-49-skill-guide-compliance-review.2 Optimize skill descriptions for routing quality and budget compliance\n\n## Description\nApply fixes to all non-compliant skill front matter identified in Task 1's audit. Optimize descriptions for maximum routing effectiveness while reducing total budget below the WARN threshold.\n\n**Size:** M\n**Files:** All 127 `skills/**/SKILL.md` files (WHEN removal is systemic; 16 skills also need disambiguation rewording)\n\n## Approach\n\n1. Read Task 1 findings report at `.flow/reports/fn-49.1-compliance-audit.md`\n2. **Priority 1 \u2014 Remove WHEN prefix from all 127 skills** (systemic, saves 630 budget chars; audit concluded NONE add routing value). Capitalize the new first word after removal. Include `plugin-self-publish` for consistency even though it is budget-excluded.\n3. **Priority 2 \u2014 Disambiguate 8 overlapping pairs** (16 skills, findings M-1 through M-7 and M-9). Apply suggested rewording from the audit report, then apply WHEN removal on top (audit suggestions still show WHEN for readability).\n4. **Priority 3 \u2014 Remove filler word** from `dotnet-csharp-async-patterns` (finding M-8: remove \"Covers\", saves 7 chars)\n5. Run `./scripts/validate-skills.sh` after each batch to track budget progress\n6. Target total budget \u226411,800 chars (current baseline is 12,417; projected after all fixes ~11,730)\n\n### Optimization Strategies\n\n- **Remove WHEN prefix unconditionally**: Strip `WHEN ` (5 chars) from all 127 descriptions and capitalize the next word. The audit confirmed WHEN provides zero disambiguation signal since every skill uses it uniformly.\n- **Disambiguate overlapping pairs**: Apply the audit's suggested descriptions for findings M-1 through M-7 and M-9 (8 pairs, 16 skills). Each suggestion sharpens the unique differentiator between the pair.\n- **Remove filler verbs**: Drop \"Covers\" from `dotnet-csharp-async-patterns` (M-8). Check for other filler during editing but the audit found only this one instance.\n- **Sharpen triggers**: Replace vague verbs with specific ones (\"Configure X\" vs \"Work with X\") where encountered\n- **Add keywords**: Include framework/technology names that Claude needs for routing where missing\n- **Trim redundancy**: If the skill name already conveys the domain, don't repeat it in description\n\n### Key context\n\n- Edit only the `name` and `description` fields in SKILL.md front matter \u2014 do not modify body content\n- The `name` field must match the skill directory name (e.g., `skills/core-csharp/dotnet-csharp-records/` \u2192 `name: dotnet-csharp-records`)\n- Remove any extra frontmatter fields beyond `name` and `description`\n- Description max: 120 chars per skill; total budget target: \u226411,800 chars\n- Run `./scripts/validate-skills.sh` to verify \u2014 must show BUDGET_STATUS=OK\n- Pattern reference: `CONTRIBUTING-SKILLS.md:107-148` for description formula\n- `plugin-self-publish` has `disable-model-invocation: true` \u2014 excluded from budget calculation\n## Acceptance\n<!-- Updated by plan-sync: fn-49.1 produced 0 critical findings, 9 major, 1 systemic minor; audit report at .flow/reports/fn-49.1-compliance-audit.md; baseline budget is 12,417 not 12,038; all 127 skills need WHEN removal -->\n- [ ] All critical findings from Task 1 audit fixed (Task 1 found 0 critical \u2014 this is a no-op confirmation)\n- [ ] All major findings from Task 1 audit fixed\n- [ ] Minor findings addressed where practical\n- [ ] Total description budget \u226411,800 chars\n- [ ] Zero skills with descriptions >120 chars\n- [ ] All `name` fields match their directory path\n- [ ] No extra frontmatter fields (only `name` and `description`)\n- [ ] Third-person voice used consistently\n- [ ] Overlapping skill pairs have clearly disambiguated descriptions\n- [ ] `./scripts/validate-skills.sh` passes with BUDGET_STATUS=OK\n- [ ] `./scripts/validate-marketplace.sh` passes\n- [ ] No SKILL.md body content changed (front matter only)\n## Done summary\nOptimized all 127 skill descriptions: removed WHEN prefix systemically, disambiguated 8 overlapping pairs (M-1 through M-7, M-9), removed filler word (M-8), and trimmed 12 longest descriptions. Budget reduced from 12,515 to 11,774 chars (below 11,800 target).\n## Evidence\n- Commits: f19dbd48ebcfdff2b75fb015a25dcddfb4635bdf\n- Tests: ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh\n- PRs:"
    },
    {
      "data": {
        "assignee": null,
        "claim_note": "",
        "claimed_at": null,
        "created_at": "2026-02-17T04:14:11.450846Z",
        "depends_on": [
          "fn-49-skill-guide-compliance-review.2"
        ],
        "epic": "fn-49-skill-guide-compliance-review",
        "id": "fn-49-skill-guide-compliance-review.3",
        "priority": null,
        "spec_path": ".flow/tasks/fn-49-skill-guide-compliance-review.3.md",
        "status": "todo",
        "title": "Enhance validation scripts for ongoing quality enforcement",
        "updated_at": "2026-02-17T04:15:11.505871Z"
      },
      "id": "fn-49-skill-guide-compliance-review.3",
      "runtime": {
        "assignee": "claire@novotny.org",
        "claim_note": "",
        "claimed_at": "2026-02-17T09:26:56.666554Z",
        "evidence": {
          "commits": [
            "5bfbcb9a02bb94c1b647cb870b3333432130a47d"
          ],
          "prs": [],
          "tests": [
            "./scripts/validate-skills.sh",
            "./scripts/validate-marketplace.sh"
          ]
        },
        "status": "done",
        "updated_at": "2026-02-17T09:34:22.884254Z"
      },
      "spec": "# fn-49-skill-guide-compliance-review.3 Enhance validation scripts for ongoing quality enforcement\n\n## Description\nEnhance `scripts/_validate_skills.py` to enforce the quality standards established in Tasks 1-2, preventing regression on front matter quality.\n\n**Size:** M\n**Files:** `scripts/_validate_skills.py`, `scripts/validate-skills.sh`\n\n## Approach\n\n1. Add name-directory consistency check: verify `name` field matches the skill's directory name\n2. Add extra-frontmatter detection: warn on any fields beyond `name` and `description`\n3. Add description quality heuristics: detect common filler phrases (especially \"Covers\", \"helps with\", \"guide to\"), missing technology keywords\n3b. Add WHEN prefix regression check: warn if any description starts with \"WHEN \" (Task 2 removes all; this prevents reintroduction)\n4. Keep all checks as warnings (not errors) to avoid breaking CI for edge cases\n5. Update `validate-skills.sh` thresholds if needed\n6. Ensure no existing validation behavior changes (backward compatible)\n\n### New Checks to Add\n\n| Check | Type | Implementation |\n|-------|------|----------------|\n| Name-directory match | Warning | Compare `name` value to last path segment of skill directory |\n| Extra frontmatter fields | Warning | Flag any field not in `{name, description}` |\n| Filler phrase detection | Warning | Check for common filler patterns: \"Covers\", \"helps with\", \"guide to\", \"complete guide\" (audit found \"Covers\" as the only instance; others are preventive) |\n| WHEN prefix detection | Warning | Flag descriptions starting with \"WHEN \" \u2014 Task 2 removes all WHEN prefixes; this prevents regression |\n| Description starts with verb or noun phrase | Info | Heuristic: after WHEN removal, descriptions start with varied patterns (verbs like \"Writing...\", noun phrases like \"Async/await patterns.\") \u2014 both are acceptable |\n\n### Key context\n\n- Validator uses a strict YAML subset parser (no PyYAML) at `scripts/_validate_skills.py`\n- Single-pass, no subprocesses, no network \u2014 must stay environment-independent\n- Same commands run locally and in CI\n- Current stable output keys: `CURRENT_DESC_CHARS`, `PROJECTED_DESC_CHARS`, `BUDGET_STATUS` \u2014 do not change these\n- Add new output keys for new checks (e.g., `NAME_DIR_MISMATCHES=0`, `WHEN_PREFIX_COUNT=0`)\n- Follow existing code patterns in `_validate_skills.py` for warning/error reporting\n## Acceptance\n- [ ] Name-directory mismatch detection added (warning level)\n- [ ] Extra frontmatter field detection added (warning level)\n<!-- Updated by plan-sync: fn-49.1 found \"Covers\" as only filler instance; Task 2 removes all WHEN prefixes so Task 3 needs WHEN regression check; audit report at .flow/reports/fn-49.1-compliance-audit.md -->\n- [ ] Filler phrase detection added (warning level, includes \"Covers\" pattern found by audit)\n- [ ] All new checks produce warnings, not errors\n- [ ] Existing output keys unchanged (`CURRENT_DESC_CHARS`, `PROJECTED_DESC_CHARS`, `BUDGET_STATUS`)\n- [ ] WHEN prefix regression detection added (warning level)\n- [ ] New output keys added for new checks (including `WHEN_PREFIX_COUNT`)\n- [ ] `./scripts/validate-skills.sh` passes on current codebase\n- [ ] No external dependencies added (no PyYAML, no network, no subprocesses)\n- [ ] Validator remains single-pass\n## Done summary\nAdded 4 quality enforcement checks to _validate_skills.py: name-directory consistency, extra frontmatter field detection, filler phrase detection (\"Covers\", \"helps with\", \"guide to\", \"complete guide\"), and WHEN prefix regression detection. All checks produce warnings (not errors) with new stable CI-parseable output keys (NAME_DIR_MISMATCHES, EXTRA_FIELD_COUNT, FILLER_PHRASE_COUNT, WHEN_PREFIX_COUNT). Existing output keys and behavior unchanged.\n## Evidence\n- Commits: 5bfbcb9a02bb94c1b647cb870b3333432130a47d\n- Tests: ./scripts/validate-skills.sh, ./scripts/validate-marketplace.sh\n- PRs:"
    }
  ]
}
